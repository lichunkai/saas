webpackJsonp([37],{276:function(e,a,t){"use strict";function i(e){d||t(728)}Object.defineProperty(a,"__esModule",{value:!0});var s=t(511),r=t.n(s);for(var o in s)"default"!==o&&function(e){t.d(a,e,function(){return s[e]})}(o);var l=t(730),n=t.n(l),d=!1,u=t(0),c=i,m=u(r.a,n.a,!1,c,null,null);m.options.__file="src/views/resource/xiaoqu.vue",a.default=m.exports},511:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i="";a.default={name:"xiaoqu",data:function(){var e=this;return{pianquDataModel:[],formValidate:{name:"",quyu:[],address:"",averagePrice:""},ruleValidate:{name:[{required:!0,message:"请输入小区名称",trigger:"blur"}],address:[{required:!0,message:"请输入小区地址",trigger:"blur"}],averagePrice:[{required:!0,message:"请输入出售均价",trigger:"blur"}]},guanjianzi:"",totalnum1:0,currentpage1:1,pageSize:10,cityLists:[{value:"wuzhong",label:"吴中区"},{value:"yuanqu",label:"园区"}],cityModel:"",xiaoquAddModal:!1,xiaoquset:!1,setformValidate:{name:"",quyu:[],address:"",averagePrice:""},setruleValidate:{name:[{required:!0,message:"请输入小区名称",trigger:"blur"}],address:[{required:!0,message:"请输入小区地址",trigger:"blur"}]},xiaoquColumns:[{title:"小区名称",key:"village_name",align:"center"},{title:"所属行政区",key:"area_name",align:"center"},{title:"所属片区",key:"dts_name",align:"center"},{title:"出售均价",key:"village_price",align:"center"},{title:"小区地址",key:"village_address",align:"center"},{title:"操作",key:"action",align:"center",render:function(a,t){return 1==t.row.village_status?a("div",[a("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.compile(t)}}},"编辑"),a("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(t)}}},"删除")]):a("div",{style:{color:"#ddd"}},"系统参数无法修改或者删除")}}],xiaoquData:[],pianquData:[]}},created:function(){this.getxiaoqulist()},methods:{clickRow:function(e,a){i=a},changePage1:function(e){this.currentpage1=e,this.getxiaoqulist()},getxiaoqulist:function(){this.$http.get(api_param.apiurl+"village/index",{params:{page:this.currentpage1,kw:this.guanjianzi,dts_id:this.pianquDataModel[1]},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.totalnum1=parseInt(e.body.data.count),this.xiaoquData=e.body.data.list,this.pianquData=e.body.data.district):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){console.log(e)})},compile:function(e){this.xiaoquset=!0,this.setformValidate.name=e.row.village_name,this.setformValidate.address=e.row.village_address,this.setformValidate.averagePrice=e.row.village_price,this.setformValidate.quyu=[e.row.area_id,e.row.dts_id]},settingOk:function(){var e=this;2===this.setformValidate.quyu.length?this.$refs.setformValidate.validate(function(a){a&&e.$http.post(api_param.apiurl+"/village/edit",{dts_id:e.setformValidate.quyu[1],village_price:e.setformValidate.averagePrice,village_address:e.setformValidate.address,village_name:e.setformValidate.name,village_id:e.xiaoquData[i].village_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.$refs.setformValidate.resetFields(),this.xiaoquset=!1,this.$Message.success(e.data.message),this.getxiaoqulist()):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("更新失败")})}):this.$Message.warning("请选择行政区下的片区")},settingCancel:function(){this.xiaoquset=!1,this.$refs.setformValidate.resetFields()},xiaoquAdd:function(){this.xiaoquAddModal=!0},addOk:function(){var e=this;2==this.formValidate.quyu.length?this.$refs.formValidate.validate(function(a){a&&e.$http.post(api_param.apiurl+"/village/add",{dts_id:e.formValidate.quyu[1],village_price:e.formValidate.averagePrice,village_address:e.formValidate.address,village_name:e.formValidate.name},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){console.log(e),200==e.data.code?(this.$refs.formValidate.resetFields(),this.xiaoquAddModal=!1,this.$Message.success(e.data.message),this.getxiaoqulist()):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("更新失败")})}):this.$Message.warning("请选择行政区下的片区")},addCancel:function(){this.$refs.formValidate.resetFields(),this.xiaoquAddModal=!1},remove:function(e){var a=this;this.$Modal.confirm({title:"删除小区",content:"确定要删除吗",okText:"确定",cancelText:"取消",onOk:function(){a.$http.post(api_param.apiurl+"/village/del",{village_id:e.row.village_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.$Message.success(e.data.message),this.getxiaoqulist()):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("删除失败")})}})},doSearch:function(){this.currentpage1=1,this.getxiaoqulist()},clearSearch:function(){this.guanjianzi="",this.pianquDataModel="",this.getxiaoqulist()}},computed:{}}},728:function(e,a,t){var i=t(729);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(8)("36d34c8b",i,!1,{})},729:function(e,a,t){a=e.exports=t(7)(!1),a.push([e.i,"",""])},730:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("Row",[t("Col",{attrs:{lg:24,md:24}},[t("Card",[t("Row",{attrs:{gutter:5}},[t("Col",{attrs:{lg:2,md:2}},[t("Cascader",{attrs:{data:e.pianquData},model:{value:e.pianquDataModel,callback:function(a){e.pianquDataModel=a},expression:"pianquDataModel"}})],1),e._v(" "),t("Col",{attrs:{lg:2,md:2}},[t("Input",{attrs:{placeholder:"小区名搜索"},model:{value:e.guanjianzi,callback:function(a){e.guanjianzi=a},expression:"guanjianzi"}})],1),e._v(" "),t("Col",{attrs:{lg:3,md:3}},[t("Button",{attrs:{type:"primary"},on:{click:e.doSearch}},[e._v("查询")]),e._v(" "),t("Button",{attrs:{type:"primary"},on:{click:e.clearSearch}},[e._v("清空")])],1),e._v(" "),t("Col",{attrs:{lg:2,md:2,offset:"15"}},[t("Row",{attrs:{type:"flex",justify:"end"}},[t("Col",[t("Button",{attrs:{type:"primary"},on:{click:e.xiaoquAdd}},[e._v("新增")]),e._v(" "),t("Modal",{attrs:{title:"新增小区","mask-closable":!1},model:{value:e.xiaoquAddModal,callback:function(a){e.xiaoquAddModal=a},expression:"xiaoquAddModal"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:e.addCancel}},[t("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),e._v(" "),t("div",{staticClass:"ivu-modal-header-inner"},[e._v("新增小区")])]),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text",size:"large"},on:{click:e.addCancel}},[e._v("取消")]),e._v(" "),t("Button",{attrs:{type:"primary",size:"large"},on:{click:e.addOk}},[e._v("确定")])],1),e._v(" "),t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[t("FormItem",{attrs:{label:"小区名称",prop:"name"}},[t("Input",{attrs:{placeholder:""},model:{value:e.formValidate.name,callback:function(a){e.$set(e.formValidate,"name",a)},expression:"formValidate.name"}})],1),e._v(" "),t("FormItem",{attrs:{label:"所属片区",prop:"quyu"}},[t("Cascader",{attrs:{data:e.pianquData},model:{value:e.formValidate.quyu,callback:function(a){e.$set(e.formValidate,"quyu",a)},expression:"formValidate.quyu"}})],1),e._v(" "),t("FormItem",{attrs:{label:"小区地址",prop:"address"}},[t("Input",{attrs:{placeholder:""},model:{value:e.formValidate.address,callback:function(a){e.$set(e.formValidate,"address",a)},expression:"formValidate.address"}})],1),e._v(" "),t("FormItem",{attrs:{label:"出售均价",prop:"averagePrice"}},[t("Input",{attrs:{placeholder:""},model:{value:e.formValidate.averagePrice,callback:function(a){e.$set(e.formValidate,"averagePrice",a)},expression:"formValidate.averagePrice"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("元/㎡")])])],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),t("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[t("Card",[t("Row",[t("Col",[t("Table",{attrs:{border:"",columns:e.xiaoquColumns,data:e.xiaoquData},on:{"on-row-click":e.clickRow}}),e._v(" "),t("Modal",{attrs:{title:"修改小区","mask-closable":!1},model:{value:e.xiaoquset,callback:function(a){e.xiaoquset=a},expression:"xiaoquset"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:e.settingCancel}},[t("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),e._v(" "),t("div",{staticClass:"ivu-modal-header-inner"},[e._v("修改小区")])]),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text",size:"large"},on:{click:e.settingCancel}},[e._v("取消")]),e._v(" "),t("Button",{attrs:{type:"primary",size:"large"},on:{click:e.settingOk}},[e._v("确定")])],1),e._v(" "),t("Form",{ref:"setformValidate",attrs:{model:e.setformValidate,rules:e.setruleValidate,"label-width":80}},[t("FormItem",{attrs:{label:"小区名称",prop:"name"}},[t("Input",{model:{value:e.setformValidate.name,callback:function(a){e.$set(e.setformValidate,"name",a)},expression:"setformValidate.name"}})],1),e._v(" "),t("FormItem",{attrs:{label:"所属片区"}},[t("Cascader",{attrs:{data:e.pianquData},model:{value:e.setformValidate.quyu,callback:function(a){e.$set(e.setformValidate,"quyu",a)},expression:"setformValidate.quyu"}})],1),e._v(" "),t("FormItem",{attrs:{label:"小区地址",prop:"address"}},[t("Input",{attrs:{type:"text"},model:{value:e.setformValidate.address,callback:function(a){e.$set(e.setformValidate,"address",a)},expression:"setformValidate.address"}})],1),e._v(" "),t("FormItem",{attrs:{label:"出售均价",prop:"averagePrice"}},[t("Input",{attrs:{type:"text"},model:{value:e.setformValidate.averagePrice,callback:function(a){e.$set(e.setformValidate,"averagePrice",a)},expression:"setformValidate.averagePrice"}},[t("span",{attrs:{slot:"append"},slot:"append"},[e._v("元/平方米")])])],1)],1)],1),e._v(" "),t("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[t("Col",[t("Page",{attrs:{total:e.totalnum1,current:e.currentpage1,"page-size":e.pageSize,"show-total":""},on:{"on-change":e.changePage1}})],1)],1)],1)],1)],1)],1)],1)},s=[];i._withStripped=!0;var r={render:i,staticRenderFns:s};a.default=r}});