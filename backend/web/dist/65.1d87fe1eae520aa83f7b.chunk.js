webpackJsonp([65],{270:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(505),r=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);var i=a(714),o=a.n(i),c=a(0),l=c(r.a,o.a,!1,null,null,null);l.options.__file="src/views/operation-audit/auditShenpi.vue",t.default=l.exports},505:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"auditShenpi",data:function(){var e=this;return{search:{v_status:"0"},settings:{},page:1,pageTotal:0,pageSize:10,v_reject_reason:"",formItem:{select:"",date:""},shenpiColumns:[{title:"业务类型",key:"v_service_type_text",fixed:"left",width:88,align:"center"},{title:"审核类型",key:"v_type",width:108,align:"center"},{title:"审核状态",key:"v_status_text",width:108,align:"center"},{title:"申请人",key:"post_user",width:128,align:"center"},{title:"申请时间",key:"ctime",width:128,align:"center"},{title:"资源编号",key:"v_service_sn",width:128,align:"center",render:function(t,a){return t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0",textDecoration:"underline"},domProps:{innerHTML:a.row.v_service_sn},on:{click:function(){if(1==a.row.v_service_type)if(console.log(a.row.v_service_id),a.row.v_service_id){var t={houseId:a.row.v_service_id,saleType:2};e.$router.push({name:"roomDetails",params:t})}else e.$Message.warning("参数错误")}}})}},{title:"审核人",key:"end_user",width:128,align:"center"},{title:"实际审核人",key:"shijishenheren",width:128,align:"center"},{title:"审核时间",key:"utime",width:138,align:"center"},{title:"申请内容",key:"v_content",width:168,align:"center"},{title:"驳回原因",key:"v_reject_reason",width:148,align:"center"},{title:"操作",key:"action",width:88,fixed:"right",align:"center",render:function(t,a){if(0==a.row.v_status)return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$http.post(api_param.apiurl+"workverify/pass",{v_id:a.row.v_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.$Message.success("操作成功"),this.getIndex()):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("网络异常")})}}},"确认"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.v_reject_reason,autofocus:!0,placeholder:"请输入驳回理由"},on:{input:function(t){e.v_reject_reason=t}}})},onOk:function(){var t={v_reject_reason:e.v_reject_reason,v_id:a.row.v_id};e.$http.post(api_param.apiurl+"workverify/reject",t,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.$Message.success("操作成功"),this.getIndex()):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("网络异常")})}})}}},"驳回")])}}],shenpiData:[],users:[]}},created:function(){this.getSetting(),this.getIndex()},methods:{getIndex:function(){this.search.page=this.page,this.$http.post(api_param.apiurl+"workverify/getindex",this.search,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.$Message.success("获取成功"),this.shenpiData=e.data.data.list,this.pageTotal=parseInt(e.data.data.count)):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("网络异常")})},getSetting:function(){this.$http.get(api_param.apiurl+"workverify/getsetting",{params:{},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){if(200==e.data.code)for(var t in e.data.data)this.$set(this.settings,t,e.data.data[t]);else 401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.error("你的网络开小差了^—^")})},doSearch:function(){this.page=1,this.getIndex()},clearSearch:function(){this.page=1,this.search={},this.search.departpath=[],this.getIndex()},formatDate:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var s=e.getDate();return s=s<10?"0"+s:s,t+"-"+a+"-"+s},changePage:function(e){this.page=e,this.getIndex()},changeDepart:function(e,t){var a=e[e.length-1];this.users=this.settings.users[a]}}}},714:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Col",{attrs:{lg:24,md:24}},[a("Card",[a("Row",{attrs:{gutter:5}},[a("Col",{attrs:{lg:2,md:2}},[a("Select",{attrs:{transfer:!0,placeholder:"业务类型"},model:{value:e.search.v_service_type,callback:function(t){e.$set(e.search,"v_service_type",t)},expression:"search.v_service_type"}},e._l(e.settings.v_service_type,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("Select",{attrs:{transfer:!0,placeholder:"审核状态"},model:{value:e.search.v_status,callback:function(t){e.$set(e.search,"v_status",t)},expression:"search.v_status"}},[a("Option",{attrs:{value:"0"}},[e._v("待审核")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("通过")]),e._v(" "),a("Option",{attrs:{value:"9"}},[e._v("驳回")])],1)],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("Cascader",{attrs:{placeholder:"申请人部门",data:e.settings.departlist,value:e.search.departpath,"v-model":e.search.departpath,filterable:"","change-on-select":"",transfer:!0},on:{"on-change":e.changeDepart}})],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("Select",{attrs:{placeholder:"申请人",transfer:!0},model:{value:e.search.v_post_user,callback:function(t){e.$set(e.search,"v_post_user",t)},expression:"search.v_post_user"}},e._l(e.users,function(t){return a("Option",{key:t.u_id,attrs:{value:t.u_id}},[e._v(e._s(t.u_name))])}),1)],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("DatePicker",{attrs:{type:"date",placeholder:"申请日期-起",value:e.search.ctime_start,format:"yyyy-MM-dd",transfer:!0},on:{"on-change":function(t){e.search.ctime_start=t}}})],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("DatePicker",{attrs:{type:"date",placeholder:"申请日期-止",value:e.search.ctime_end,format:"yyyy-MM-dd",transfer:!0},on:{"on-change":function(t){e.search.ctime_end=t}}})],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("DatePicker",{attrs:{type:"date",placeholder:"审核日期-起",value:e.search.utime_start,format:"yyyy-MM-dd",transfer:!0},on:{"on-change":function(t){e.search.utime_start=t}}})],1),e._v(" "),a("Col",{attrs:{lg:2,md:2}},[a("DatePicker",{attrs:{type:"date",placeholder:"审核日期-止",value:e.search.utime_end,format:"yyyy-MM-dd",transfer:!0},on:{"on-change":function(t){e.search.utime_end=t}}})],1),e._v(" "),a("Col",{attrs:{lg:3,md:3}},[a("Button",{attrs:{type:"primary"},on:{click:e.doSearch}},[e._v("查询")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.clearSearch}},[e._v("清空")])],1)],1)],1)],1),e._v(" "),a("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[a("Card",[a("Table",{attrs:{columns:e.shenpiColumns,data:e.shenpiData,border:"",script:""}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.pageTotal,current:e.page,"show-total":"","page-size":e.pageSize},on:{"on-change":e.changePage}})],1)])],1)],1)],1)},r=[];s._withStripped=!0;var n={render:s,staticRenderFns:r};t.default=n}});