webpackJsonp([32],{260:function(e,t,a){"use strict";function n(e){c||a(684)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(495),r=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);var o=a(686),l=a.n(o),c=!1,u=a(0),h=n,g=u(r.a,l.a,!1,h,null,null);g.options.__file="src/views/ziyuanguanli/fy-genjin.vue",t.default=g.exports},495:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),r=(n(s),a(9));n(r);t.default={name:"fyGenjin",data:function(){var e=this;return{genjinjilv:!1,pageTotal:0,pageCurrent:1,pageSize:10,FPpageTotal:0,FPpageCurrent:1,FPpageSize:10,settings:[],mDaterange:[],searchDaterange:[],searchData:{u_id:"",f_type:"",hf_type:"",keywd:""},departpath:[],users:[],selhouseId:"",genjinColumns:[{title:"类型",key:"sale_type",align:"center",render:function(e,t){var a=t.row.sale_type,n="";if("2"==a)n="出售房源";else if("1"==a)n="出租房源";else{if("3"!=a)return"未知房源";n="高端房源"}return e("div",{props:{}},n)}},{title:"跟进时间",key:"ctime",align:"center"},{title:"跟单方式",key:"hf_type",align:"center"},{title:"房源编号",key:"house_sn",align:"center",render:function(t,a){return t("div",[t("a",{props:{type:"warning",size:"small"},style:{textDecoration:"underline"},domProps:{innerHTML:a.row.house_sn},on:{click:function(){var t={houseId:a.row.house_uuid,saleType:a.row.sale_type};e.$router.push({name:"roomDetails",params:t})}}})])}},{title:"小区",key:"village_name",align:"center"},{title:"跟进人",key:"u_name",align:"center"},{title:"部门",key:"d_name",align:"center"},{title:"跟进内容",key:"hf_content",align:"center"},{title:"操作",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("a",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.selhouseId=a.row.house_id,e.genjinjilv=!0,e.getFollowup()}}},"查看所有跟进")])}}],genjinData:[{genleixing:"房源出售",gentime:"2018-7-20 14:53",genfangshi:"电话跟进",gennum:"CSFY-1807-0025",xiaoqu:"阳光城",genmen:"徐晓月",genbumen:"金筑店",genneirong:"业主不打算降价"}],listColumns:[{title:"跟进时间",key:"ctime",align:"center",width:128},{title:"跟进方式",key:"hf_type",align:"center"},{title:"跟进人",key:"u_name",align:"center"},{title:"所在部门",key:"d_name",align:"center"},{title:"跟进内容",key:"hf_content",align:"center",width:220}],followupList:[]}},created:function(){this.getSetting(),this.getIndex()},methods:{changeSearchDepart:function(e,t){this.departpath=e;var a=e[e.length-1];this.users=this.settings.users[a]},getSetting:function(){this.$http.get(api_param.apiurl+"house/getsetting",{params:{},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){if(200==e.data.code){for(var t in e.data.data)this.$set(this.settings,t,e.data.data[t]);e.data.data.customcolumns[5]&&null!=e.data.data.customcolumns[5]&&(this.tableColumnsChecked=e.data.data.customcolumns[5])}else 401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.error("你的网络开小差了^—^")})},changePage:function(e){this.pageCurrent=e,this.getIndex()},changeFPPage:function(e){this.FPpageCurrent=e,this.getFollowup()},doSearch:function(){this.pageCurrent=1,this.getIndex()},clearSearch:function(){for(var e in this.searchData)this.$set(this.searchData,e,"");this.searchDaterange=[],this.mDaterange=[],this.getIndex()},changeDaterange:function(e){this.searchDaterange=e},clearDaterange:function(e){this.searchDaterange=[]},getIndex:function(){var e=this.searchData;e.page=this.pageCurrent,e.dateRange=this.searchDaterange,this.$http.post(api_param.apiurl+"house/getgenjin",e,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.genjinData=e.data.data.list,this.pageTotal=parseInt(e.data.data.count)):401==e.data.code?(this.$Message.error("登录超时"),this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.error("网络异常")})},getFollowup:function(){this.$http.post(api_param.apiurl+"house/getfollowups",{house_id:this.selhouseId,page:this.FPpageCurrent},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.followupList=e.data.data.list,this.FPpageTotal=parseInt(e.data.data.count)):401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.error("网络异常")})}}}},684:function(e,t,a){var n=a(685);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(8)("777a0cf4",n,!1,{})},685:function(e,t,a){t=e.exports=a(7)(!1),t.push([e.i,"",""])},686:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Col",{attrs:{lg:24}},[a("Card",[a("Row",{attrs:{gutter:5}},[a("Col",{attrs:{lg:2}},[a("Select",{attrs:{placeholder:"房源类型",transfer:!0},model:{value:e.searchData.f_type,callback:function(t){e.$set(e.searchData,"f_type",t)},expression:"searchData.f_type"}},[a("Option",{attrs:{value:"2"}},[e._v("出售房源")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("出租房源")]),e._v(" "),a("Option",{attrs:{value:"3"}},[e._v("高端房源")])],1)],1),e._v(" "),a("Col",{attrs:{lg:2}},[a("Select",{attrs:{placeholder:"跟单方式",transfer:!0},model:{value:e.searchData.hf_type,callback:function(t){e.$set(e.searchData,"hf_type",t)},expression:"searchData.hf_type"}},e._l(e.settings.gengjinfangshi,function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}),1)],1),e._v(" "),a("Col",{attrs:{lg:2}},[a("Cascader",{attrs:{data:e.settings.departlist,placeholder:"部门选择",filterable:"","change-on-select":"",transfer:!0},on:{"on-change":e.changeSearchDepart},model:{value:e.searchData.departpath,callback:function(t){e.$set(e.searchData,"departpath",t)},expression:"searchData.departpath"}})],1),e._v(" "),a("Col",{attrs:{lg:2}},[a("Select",{attrs:{placeholder:"跟进人",transfer:!0},model:{value:e.searchData.u_id,callback:function(t){e.$set(e.searchData,"u_id",t)},expression:"searchData.u_id"}},e._l(e.users,function(t){return a("Option",{key:t.u_id,attrs:{value:t.u_id}},[e._v(e._s(t.u_name))])}),1)],1),e._v(" "),a("Col",{attrs:{lg:3}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"开始-截止日期"},on:{"on-change":e.changeDaterange,"on-clear":e.clearDaterange},model:{value:e.mDaterange,callback:function(t){e.mDaterange=t},expression:"mDaterange"}})],1),e._v(" "),a("Col",{attrs:{lg:3}},[a("Input",{attrs:{placeholder:"小区、房源编号、跟进内容"},model:{value:e.searchData.keywd,callback:function(t){e.$set(e.searchData,"keywd",t)},expression:"searchData.keywd"}})],1),e._v(" "),a("Col",{attrs:{lg:3}},[a("Button",{attrs:{type:"primary"},on:{click:e.doSearch}},[e._v("查询")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.clearSearch}},[e._v("清空")])],1)],1)],1)],1),e._v(" "),a("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[a("Card",[a("Row",[a("Table",{attrs:{border:"",columns:e.genjinColumns,data:e.genjinData}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.pageTotal,current:e.pageCurrent,"show-total":"","page-size":e.pageSize},on:{"on-change":e.changePage}})],1)])],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:"房源跟进记录",width:"640"},model:{value:e.genjinjilv,callback:function(t){e.genjinjilv=t},expression:"genjinjilv"}},[a("Row",[a("Col",[a("Table",{attrs:{border:"",columns:e.listColumns,data:e.followupList,height:"360"}})],1)],1)],1)],1)},s=[];n._withStripped=!0;var r={render:n,staticRenderFns:s};t.default=r}});