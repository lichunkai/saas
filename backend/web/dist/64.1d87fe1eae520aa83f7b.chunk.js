webpackJsonp([64],{284:function(n,e,t){"use strict";function a(n){c||t(752)}Object.defineProperty(e,"__esModule",{value:!0});var i=t(519),s=t.n(i);for(var r in i)"default"!==r&&function(n){t.d(e,n,function(){return i[n]})}(r);var o=t(754),l=t.n(o),c=!1,h=t(0),u=a,g=h(s.a,l.a,!1,u,"data-v-f7448d3a",null);g.options.__file="src/views/check-work/qingjia-guanli.vue",e.default=g.exports},519:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"qingjiaGuanli",data:function(){var n=this;return{qingjia:!1,bumenValue:[],qingjiaModel:[],zhuangtaiModel:[],riqiModel:[],shenheValue:[],qingjialeixing:"",columns:[{title:"员工",key:"u_name",align:"center"},{title:"部门",key:"d_name",align:"center"},{title:"请假类型",key:"type",align:"center"},{title:"申请日期",key:"shenqing_date",align:"center"},{title:"开始时间",key:"st_time",align:"center"},{title:"结束时间",key:"ed_time",align:"center"},{title:"确认状态",key:"status",align:"center",render:function(n,e){var t=e.row.status,a="待确认";return"1"==t?a="通过":"2"==t&&(a="驳回"),a}},{title:"审核日期",key:"sh_time",align:"center"},{title:"审核人",key:"shenheren",align:"center"},{title:"提醒人",key:"tixingren",align:"center"},{title:"备注",key:"remark",align:"center"},{title:"操作",key:"caozuo",width:200,align:"center",render:function(e,t){var a=t.row.status,i=[e("Button",{props:{type:"text",size:"small"},style:{color:"#1877a8"},on:{click:function(){var e=t.row.st_time.split(" "),a=t.row.ed_time.split(" ");n.waichuForm.oa_qingjia_id=t.row.oa_qingjia_id,n.waichuForm.qingjialeixing=t.row.type,n.waichuForm.kaishiriqi=e[0],n.waichuForm.kaishishijian=e[1],n.waichuForm.jieshuriqi=a[0],n.waichuForm.jieshushijian=a[1],n.waichuForm.beizhu=t.row.remark,n.modifyQingjia()}}},"修改")];return"0"==a&&(i.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#1877a8"},on:{click:function(){n.shenhe(t.row.oa_qingjia_id,2)}}},"驳回")),i.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#1877a8"},on:{click:function(){n.shenhe(t.row.oa_qingjia_id,1)}}},"确认"))),i.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#1877a8"},on:{click:function(){n.qingjiaDel(t.row.oa_qingjia_id)}}},"删除")),e("div",i)}}],data:[],waichuForm:{oa_qingjia_id:"",qingjialeixing:"",kaishiriqi:"",kaishishijian:"",jieshuriqi:"",jieshushijian:"",beizhu:""},waichuRule:{qingjialeixing:[{required:!0,message:"Please select the date",trigger:"change"}],kaishishijian:[{required:!0,message:"Please select date",trigger:"blur"}],tixingren:[{required:!0,message:"Please select date",trigger:"blur"}],jieshushijian:[{required:!0,message:"Please select date",trigger:"blur"}]},current:1,total:0,pageSize:10,departchoose:[],keyword:"",status:"",searchkey:"",selShDate:[],selDate:[]}},created:function(){this.getList()},methods:{changePage:function(n){this.current=n,this.getList()},getList:function(){this.$http.get(api_param.apiurl+"oaqingjia/getlist",{params:{page:this.current,qingjialeixing:this.qingjialeixing,d_id:this.searchkey,status:this.status,kw:this.keyword,shDaterange:this.selShDate,daterange:this.selDate},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(n){200==n.data.code?(this.data=n.data.data.list,this.total=parseInt(n.data.data.totalnum),this.departchoose=n.data.data.departchoose):401==n.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(n.data.message)},function(n){console.log(n)})},modifyQingjia:function(){this.qingjia=!0},shenhe:function(n,e){this.$http.post(api_param.apiurl+"/oaqingjia/shenhe",{oa_qingjia_id:n,status:e},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(n){200==n.data.code?(this.$Message.success(n.data.message),this.getList()):401==n.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(n.data.message)},function(n){this.$Message.warning("设置失败")})},qingjiaDel:function(n){this.$http.post(api_param.apiurl+"/oaqingjia/del",{oa_qingjia_id:n},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(n){200==n.data.code?(this.$Message.success(n.data.message),this.getList()):401==n.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(n.data.message)},function(n){this.$Message.warning("设置失败")})},qingjiaOk:function(){this.$http.post(api_param.apiurl+"/oaqingjia/edit",{oa_qingjia_id:this.waichuForm.oa_qingjia_id,st:this.waichuForm.kaishiriqi,st_time:this.waichuForm.kaishishijian,ed:this.waichuForm.jieshuriqi,ed_time:this.waichuForm.jieshushijian,type:this.waichuForm.qingjialeixing,remark:this.waichuForm.beizhu},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(n){200==n.data.code?(this.qingjia=!1,this.$Message.success(n.data.message),this.getList()):401==n.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(n.data.message)},function(n){this.$Message.warning("设置失败")})},qingjiaCancel:function(){this.qingjia=!1},changeStdate:function(n){this.waichuForm.kaishiriqi=n},clearStdate:function(n){this.waichuForm.kaishiriqi=""},changeEddate:function(n){this.waichuForm.jieshuriqi=n},clearEddate:function(n){this.waichuForm.jieshuriqi=""},changeSttime:function(n){this.waichuForm.kaishishijian=n},clearSttime:function(n){this.waichuForm.kaishishijian=""},changeEdtime:function(n){this.waichuForm.jieshushijian=n},clearEdtime:function(n){this.waichuForm.jieshushijian=""},changeSqDaterange:function(n){this.selShDate=n},clearSqDaterange:function(n){this.selShDate=[]},changeDaterange:function(n){this.selDate=n},clearDaterange:function(n){this.selDate=[]},searchDepart:function(n,e){this.searchkey=n[n.length-1]},clearSearch:function(){this.searchDaterange=[],this.selShDate=[],this.selDate=[],this.status="",this.keyword="",this.qingjialeixing="",this.searchkey="",this.getList()}}}},752:function(n,e,t){var a=t(753);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(8)("672b0cca",a,!1,{})},753:function(n,e,t){e=n.exports=t(7)(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},754:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("Row",[t("Col",{attrs:{lg:24,md:24}},[t("Card",[t("Row",{attrs:{gutter:5}},[t("Col",{attrs:{lg:3,md:3}},[t("Cascader",{attrs:{data:n.departchoose,filterable:"","change-on-select":"",placeholder:"选择部门",transfer:!0},on:{"on-change":n.searchDepart}})],1),n._v(" "),t("Col",{attrs:{lg:2,md:2}},[t("Select",{staticStyle:{},attrs:{placeholder:"请假类型",transfer:!0},model:{value:n.qingjialeixing,callback:function(e){n.qingjialeixing=e},expression:"qingjialeixing"}},[t("Option",{attrs:{value:"事假",label:"事假"}}),n._v(" "),t("Option",{attrs:{value:"病假",label:"病假"}}),n._v(" "),t("Option",{attrs:{value:"年假",label:"年假"}}),n._v(" "),t("Option",{attrs:{value:"婚假",label:"婚假"}}),n._v(" "),t("Option",{attrs:{value:"丧假",label:"丧假"}}),n._v(" "),t("Option",{attrs:{value:"产假",label:"产假"}}),n._v(" "),t("Option",{attrs:{value:"其他",label:"其他"}})],1)],1),n._v(" "),t("Col",{attrs:{lg:2,md:2}},[t("Select",{staticStyle:{},attrs:{placeholder:"审批状态",transfer:!0},model:{value:n.status,callback:function(e){n.status=e},expression:"status"}},[t("Option",{attrs:{value:"0",label:"待确认"}}),n._v(" "),t("Option",{attrs:{value:"1",label:"通过"}}),n._v(" "),t("Option",{attrs:{value:"2",label:"驳回"}})],1)],1),n._v(" "),t("Col",{attrs:{lg:2,md:2}},[t("Input",{attrs:{placeholder:"员工名称、员工编号、员工电话"},model:{value:n.keyword,callback:function(e){n.keyword=e},expression:"keyword"}})],1),n._v(" "),t("Col",{attrs:{lg:3,md:3}},[t("DatePicker",{attrs:{type:"daterange",value:n.selShDate,placeholder:"选择申请日期段",transfer:!0},on:{"on-change":n.changeSqDaterange,"on-clear":n.clearSqDaterange}})],1),n._v(" "),t("Col",{attrs:{lg:3,md:3}},[t("DatePicker",{attrs:{type:"daterange",value:n.selDate,placeholder:"选择日期段",transfer:!0},on:{"on-change":n.changeDaterange,"on-clear":n.clearDaterange}})],1),n._v(" "),t("Col",{attrs:{lg:3,md:3}},[t("Button",{attrs:{type:"primary"},on:{click:n.getList}},[n._v("查询")]),n._v(" "),t("Button",{attrs:{type:"primary"},on:{click:n.clearSearch}},[n._v("清空")])],1)],1)],1)],1),n._v(" "),t("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[t("Card",[t("Table",{attrs:{border:"",columns:n.columns,data:n.data}}),n._v(" "),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticStyle:{float:"right"}},[t("Page",{attrs:{total:n.total,current:n.current,"show-total":"","page-size":n.pageSize},on:{"on-change":n.changePage}})],1)])],1)],1),n._v(" "),t("Modal",{attrs:{title:"修改请假",width:"450","mask-closable":!1},on:{"on-ok":n.qingjiaOk,"on-cancel":n.qingjiaCancel},model:{value:n.qingjia,callback:function(e){n.qingjia=e},expression:"qingjia"}},[t("Form",{ref:"waichuForm",attrs:{model:n.waichuForm,rules:n.waichuRule,"label-width":100}},[t("Row",[t("Col",{attrs:{lg:24,md:24}},[t("FormItem",{attrs:{prop:"qingjialeixing",label:"请假类型"}},[t("Select",{staticStyle:{},attrs:{placeholder:"请假类型",transfer:!0},model:{value:n.waichuForm.qingjialeixing,callback:function(e){n.$set(n.waichuForm,"qingjialeixing",e)},expression:"waichuForm.qingjialeixing"}},[t("Option",{attrs:{value:"事假",label:"事假"}}),n._v(" "),t("Option",{attrs:{value:"病假",label:"病假"}}),n._v(" "),t("Option",{attrs:{value:"年假",label:"年假"}}),n._v(" "),t("Option",{attrs:{value:"婚假",label:"婚假"}}),n._v(" "),t("Option",{attrs:{value:"丧假",label:"丧假"}}),n._v(" "),t("Option",{attrs:{value:"产假",label:"产假"}}),n._v(" "),t("Option",{attrs:{value:"其他",label:"其他"}})],1)],1)],1),n._v(" "),t("Col",{attrs:{lg:24,md:24}},[t("FormItem",{attrs:{prop:"kaishishijian",label:"开始时间"}},[t("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",value:n.waichuForm.kaishiriqi,placeholder:"选择日期段",transfer:!0},on:{"on-change":n.changeStdate,"on-clear":n.clearStdate}}),n._v(" "),t("TimePicker",{staticStyle:{width:"150px"},attrs:{value:n.waichuForm.kaishishijian,format:"HH:mm:ss"},on:{"on-change":n.changeSttime,"on-clear":n.clearSttime}})],1)],1),n._v(" "),t("Col",{attrs:{lg:24,md:24}},[t("FormItem",{attrs:{prop:"jieshushijian",label:"结束时间"}},[t("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期段",value:n.waichuForm.jieshuriqi,transfer:!0},on:{"on-change":n.changeEddate,"on-clear":n.clearEddate}}),n._v(" "),t("TimePicker",{staticStyle:{width:"150px"},attrs:{value:n.waichuForm.jieshushijian,format:"HH:mm:ss"},on:{"on-change":n.changeEdtime,"on-clear":n.clearEdtime}})],1)],1),n._v(" "),t("Col",{attrs:{lg:24,md:24}},[t("FormItem",{attrs:{prop:"beizhu",label:"备注"}},[t("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:""},model:{value:n.waichuForm.beizhu,callback:function(e){n.$set(n.waichuForm,"beizhu",e)},expression:"waichuForm.beizhu"}})],1)],1)],1)],1)],1)],1)},i=[];a._withStripped=!0;var s={render:a,staticRenderFns:i};e.default=s}});