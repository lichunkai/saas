webpackJsonp([41],{278:function(t,e,o){"use strict";function i(t){r||o(734)}Object.defineProperty(e,"__esModule",{value:!0});var s=o(513),a=o.n(s);for(var n in s)"default"!==n&&function(t){o.d(e,t,function(){return s[t]})}(n);var p=o(736),l=o.n(p),r=!1,c=o(0),u=i,_=c(a.a,l.a,!1,u,null,null);_.options.__file="src/views/resource/bitianxiang.vue",e.default=_.exports},513:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[];e.default={name:"bitianxiang",data:function(){return{types:{sale_type_es0:"二手房出售",sale_type_es1:"二手房出租",sale_type_es2:"二手房高端",customer_type0:"买卖客源",customer_type1:"租赁客源",customer_type2:"高端客源",newhouse:"新房客源"},sale_type_es0:[],sale_type_es1:[],sale_type_es2:[],customer_type0:[],customer_type1:[],customer_type2:[],newhouse:[],selectRsetting_type:"",selectOption_id:"",saveRsetting_url:"",copyType:"",housetypes:{},customertypes:{},optionsList:{},optionformValidate:{option_value:"",option_text:""},optionruleValidate:{},formValidate:{},ruleValidate:{},editOptionModal:!1,copyOptionModal:!1}},created:function(){this.getOptions(),this.gethousetypes(),this.getcustomertypes()},methods:{gethousetypes:function(){this.$http.get(api_param.apiurl+"/site/gethousetypes",{headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200===t.data.code?this.housetypes=t.body.data:401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})},getcustomertypes:function(){this.$http.get(api_param.apiurl+"/site/getcustomertypes",{headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200===t.data.code?this.customertypes=t.body.data:401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})},getOptions:function(){i=[],this.$http.get(api_param.apiurl+"/settingrequired/getlist",{headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){if(200==t.data.code){var e=t.body.data;console.log(e);for(var o in e){var i=JSON.parse(e[o].rsetting_options);e[o].rsetting_options=i,e[o].rsetting_desp&&""!=e[o].rsetting_desp&&(this[o]=e[o].rsetting_desp.split(","))}this.optionsList=e}else 401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){console.log(t),this.$Message.warning("更新失败")})},addOptionBtn:function(t){this.editOptionModal=!0,this.selectRsetting_type=t,this.saveRsetting_url="addoption"},modifyOptionBtn:function(t,e,o,i){this.editOptionModal=!0,this.selectRsetting_type=t,this.saveRsetting_url="editoption",this.selectOption_id=e,this.optionformValidate.option_value=o,this.optionformValidate.option_text=i},saveOptionOk:function(){var t=this;this.$refs.optionformValidate.validate(function(e){if(e){var o={rsetting_type:t.selectRsetting_type,option_id:t.selectOption_id,option_value:t.optionformValidate.option_value,option_text:t.optionformValidate.option_text};t.$http.post(api_param.apiurl+"settingrequired/"+t.saveRsetting_url,o,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200===t.data.code?(this.$refs.optionformValidate.resetFields(),this.$Message.success(t.data.message),this.getOptions(),this.editOptionModal=!1):401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})}})},saveOptionCancel:function(){this.$refs.optionformValidate.resetFields(),this.editOptionModal=!1},copyOptionBtn:function(t){this.copyOptionModal=!0,this.selectRsetting_type=t},saveCopyOk:function(){if(""===this.copyType)return void alert("请选择复制给谁");if(this.copyType===this.selectRsetting_type)return void alert("不要选择相同的必填项复制");var t={src_type:this.selectRsetting_type,dst_type:this.copyType};this.$http.post(api_param.apiurl+"settingrequired/copyoption",t,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200===t.data.code?(this.$Message.success(t.data.message),this.getOptions(),this.copyOptionModal=!1):401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})},saveCopyCancel:function(){this.copyOptionModal=!1},saveCheckedOptions:function(){var t={},e=[];for(var o in this.types)t[o]=this[o],e.push(o);t.types=e,this.$http.post(api_param.apiurl+"settingrequired/edit",t,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200===t.data.code?(this.$Message.success(t.data.message),this.getOptions(),this.copyOptionModal=!1):401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})}},computed:{}}},734:function(t,e,o){var i=o(735);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(8)("14d7cc7a",i,!1,{})},735:function(t,e,o){e=t.exports=o(7)(!1),e.push([t.i,"\n.marginBottom {\n  margin-bottom: 10px;\n}\n.marginLeft {\n  margin-left: 20px;\n}\n.changeColor {\n  color: red !important;\n}\n",""])},736:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Row",{attrs:{justify:"center"}},[o("Col",{attrs:{lg:24,md:24}},[o("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate}},[o("Row",{attrs:{type:"flex",justify:"center"}},[t._l(t.types,function(e,i){return o("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{lg:18,md:18}},[o("Card",{attrs:{bordered:!1}},[o("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e)+"必填项")]),t._v(" "),t.optionsList.hasOwnProperty(i)?o("Row",t._l(t.optionsList[i].rsetting_options,function(e,s){return o("Col",{staticClass:"marginBottom",attrs:{lg:3,md:3}},["sale_type_es0"===i?o("CheckboxGroup",{model:{value:t.sale_type_es0,callback:function(e){t.sale_type_es0=e},expression:"sale_type_es0"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e(),t._v(" "),"sale_type_es1"===i?o("CheckboxGroup",{model:{value:t.sale_type_es1,callback:function(e){t.sale_type_es1=e},expression:"sale_type_es1"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e(),t._v(" "),"sale_type_es2"===i?o("CheckboxGroup",{model:{value:t.sale_type_es2,callback:function(e){t.sale_type_es2=e},expression:"sale_type_es2"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e(),t._v(" "),"customer_type0"===i?o("CheckboxGroup",{model:{value:t.customer_type0,callback:function(e){t.customer_type0=e},expression:"customer_type0"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e(),t._v(" "),"customer_type1"===i?o("CheckboxGroup",{model:{value:t.customer_type1,callback:function(e){t.customer_type1=e},expression:"customer_type1"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e(),t._v(" "),"customer_type2"===i?o("CheckboxGroup",{model:{value:t.customer_type2,callback:function(e){t.customer_type2=e},expression:"customer_type2"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e(),t._v(" "),"newhouse"===i?o("CheckboxGroup",{model:{value:t.newhouse,callback:function(e){t.newhouse=e},expression:"newhouse"}},[o("Checkbox",{attrs:{label:e.option_value,"true-value":e.option_value}},[o("span",{on:{click:function(o){return t.modifyOptionBtn(i,e.option_id,e.option_value,e.option_text)}}},[t._v(t._s(e.option_text))])])],1):t._e()],1)}),1):t._e()],1)],1)}),t._v(" "),o("Col",{attrs:{lg:18,md:18}},[o("Card",{attrs:{bordered:!1}},[o("Row",{attrs:{type:"flex",justify:"center"}},[o("Col",[o("Button",{attrs:{type:"primary",lang:""},on:{click:t.saveCheckedOptions}},[t._v(" 保存")])],1)],1)],1)],1),t._v(" "),o("Col",{attrs:{lg:24,md:24}},[o("br"),o("br")])],2)],1),t._v(" "),o("Modal",{attrs:{title:"编辑选项","mask-closable":!1},model:{value:t.editOptionModal,callback:function(e){t.editOptionModal=e},expression:"editOptionModal"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.saveOptionCancel}},[o("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),o("div",{staticClass:"ivu-modal-header-inner"},[t._v("编辑选项")])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text",size:"large"},on:{click:t.saveOptionCancel}},[t._v("取消")]),t._v(" "),o("Button",{attrs:{type:"primary",size:"large"},on:{click:t.saveOptionOk}},[t._v("确定")])],1),t._v(" "),o("Form",{ref:"optionformValidate",attrs:{model:t.optionformValidate,rules:t.optionruleValidate,"label-width":90}},[o("FormItem",{attrs:{label:"选项值",prop:"option_value"}},[o("Input",{attrs:{placeholder:""},model:{value:t.optionformValidate.option_value,callback:function(e){t.$set(t.optionformValidate,"option_value",e)},expression:"optionformValidate.option_value"}})],1),t._v(" "),o("FormItem",{attrs:{label:"选项文本说明",prop:"option_text"}},[o("Input",{attrs:{placeholder:""},model:{value:t.optionformValidate.option_text,callback:function(e){t.$set(t.optionformValidate,"option_text",e)},expression:"optionformValidate.option_text"}})],1)],1)],1),t._v(" "),o("Modal",{attrs:{title:"复制选项","mask-closable":!1},model:{value:t.copyOptionModal,callback:function(e){t.copyOptionModal=e},expression:"copyOptionModal"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.saveCopyCancel}},[o("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),o("div",{staticClass:"ivu-modal-header-inner"},[t._v("复制选项")])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text",size:"large"},on:{click:t.saveCopyCancel}},[t._v("取消")]),t._v(" "),o("Button",{attrs:{type:"primary",size:"large"},on:{click:t.saveCopyOk}},[t._v("确定")])],1),t._v("\n        复制给：\n        "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.copyType,expression:"copyType"}],staticStyle:{width:"150px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.copyType=e.target.multiple?o:o[0]}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._v(" "),t._l(t.types,function(e,i){return o("option",{domProps:{value:i}},[t._v("\n                 "+t._s(e)+" - 必填选项\n            ")])})],2)])],1)],1)},s=[];i._withStripped=!0;var a={render:i,staticRenderFns:s};e.default=a}});