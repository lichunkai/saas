webpackJsonp([16],{295:function(e,t,a){"use strict";function l(e){d||a(791)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(531),i=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,function(){return r[e]})}(o);var n=a(797),s=a.n(n),d=!1,u=a(0),p=l,c=u(i.a,s.a,!1,p,null,null);c.options.__file="src/views/department/role/role.vue",t.default=c.exports},531:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(793),r=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default={name:"role_index",components:{roleCompontents:r.default},data:function(){var e=this;return{roleTitle:[{type:"index",width:60,align:"center"},{title:"角色名称",key:"role_name",align:"center"},{title:"角色说明",key:"role_desp",align:"center"},{title:"操作",key:"operation",align:"center",render:function(t,a){var l=[];return 1==a.row.button.edit&&l.push(t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.addrole=!0,e.rolemodaltitle="编辑角色",e.formValidate.role_id=a.row.role_id,e.formValidate.role_name=a.row.role_name,e.formValidate.role_type=a.row.role_type,e.formValidate.role_desp=a.row.role_desp,e.purviewdata=a.row.rolepurview}}},"编辑")),1==a.row.button.del&&l.push(t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteRole(a.row.role_id)}}},"删除")),t("div",l)}}],roleList:[],addrole:!1,rolemodaltitle:"",purviews:[],roletypes:[],dataauths:[],purviewdata:[],tmppurviewdata:[],showtab:"",topbutton:"",formValidate:{role_id:"",role_name:"",role_type:"",role_desp:""},ruleValidate:{role_name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],role_type:[{required:!0,message:"请选择角色类别",trigger:"change"}]}}},created:function(){this.getIndex()},methods:{getIndex:function(){this.$http.get(api_param.apiurl+"role/rolelist",{params:{id:this.searchkey},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){this.roleList=e.data.data.rolelist,this.purviews=e.data.data.purview,this.roletypes=e.data.data.roletype,this.dataauths=e.data.data.dataauth,this.purviewdata=e.data.data.purviewdata,this.tmppurviewdata=e.data.data.purviewdata,this.showtab=e.data.data.showtab,this.topbutton=e.data.data.topbutton},function(e){console.log(e)})},addRole:function(){this.addrole=!0,this.formValidate.role_id="",this.rolemodaltitle="新增角色"},modalOk:function(){var e=this;this.$refs.formValidate.validate(function(t){t&&e.$http.post(api_param.apiurl+"role/updaterole",{role_id:e.formValidate.role_id,role_name:e.formValidate.role_name,role_type:e.formValidate.role_type,role_desp:e.formValidate.role_desp,auths:e.purviewdata},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){this.addrole=!1,this.$refs.formValidate.resetFields(),this.$Message.success("更新成功"),this.getIndex()},function(e){this.$Message.warning("更新失败")})})},modalCancel:function(){this.addrole=!1,this.purviewdata=this.tmppurviewdata,this.$refs.formValidate.resetFields()},deleteRole:function(e){var t=this;this.$Modal.confirm({title:"删除角色",content:"确定要删除该角色吗？",okText:"确定",cancelText:"取消",onOk:function(){t.$http.post(api_param.apiurl+"role/delrole",{id:e},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){this.$Message.success(e.data.message),this.getIndex()},function(e){this.$Message.warning(e.data.message)})}})}},computed:{}}},532:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"roleCompontents",data:function(){return{options:[{value:"jingzhi",label:"禁止"},{value:"benren",label:"本人"},{value:"benzu",label:"本组"},{value:"bendian",label:"本店"},{value:"benqu",label:"本区"},{value:"suoyou",label:"所有"},{value:"bendaqu",label:"本大区"}],Unlimited:""}},methods:{},computed:{}}},791:function(e,t,a){var l=a(792);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(8)("4d2ede56",l,!1,{})},792:function(e,t,a){t=e.exports=a(7)(!1),t.push([e.i,"/*角色管理*/\n.newname {\n  line-height: 36px;\n  padding-right: 15px;\n}\n.ivu-tabs {\n  overflow: visible;\n}\n.rolemainul {\n  border: #e2e2e2 1px solid;\n  border-bottom: none;\n}\n.rolemainul .rolemain {\n  border-radius: 3px;\n  -webkit-border-radius: 3px;\n  -moz-border-radius: 3px;\n  -o-border-radius: 3px;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  overflow: hidden;\n}\n.rolemainul .rolemain .rolemainlist {\n  -ms-flex: 1;\n      flex: 1;\n  height: 38px;\n  line-height: 38px;\n  border-bottom: #e2e2e2 1px solid;\n  border-right: #e2e2e2 1px solid;\n  overflow: hidden;\n  display: table-cell;\n  vertical-align: middle;\n}\n.rolemainul .rolemain .rolemainlist .rolewidth {\n  text-align: center;\n  margin: auto;\n}\n.rolemainul .rolemain .rolemainlist:last-child {\n  border-right: none;\n}\n",""])},793:function(e,t,a){"use strict";function l(e){d||a(794)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(532),i=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,function(){return r[e]})}(o);var n=a(796),s=a.n(n),d=!1,u=a(0),p=l,c=u(i.a,s.a,!1,p,"data-v-b94e57a6",null);c.options.__file="src/views/department/role/role-compontents.vue",t.default=c.exports},794:function(e,t,a){var l=a(795);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(8)("1beb3b4e",l,!1,{})},795:function(e,t,a){t=e.exports=a(7)(!1),t.push([e.i,"\n.ivu-select-selection[data-v-b94e57a6] {\n  width: 65px;\n}\n.ivu-select[data-v-b94e57a6] {\n  width: 65px !important;\n}\n.ivu-select-item[data-v-b94e57a6] {\n  padding: 8px 10px;\n}\n",""])},796:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"不限",transfer:!1},model:{value:e.Unlimited,callback:function(t){e.Unlimited=t},expression:"Unlimited"}},e._l(e.options,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)},r=[];l._withStripped=!0;var i={render:l,staticRenderFns:r};t.default=i},797:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Col",{attrs:{lg:24,md:24}},[a("Card",[a("Row",{attrs:{type:"flex",justify:"end"}},[a("Col",[1==e.topbutton.add?a("div",[a("Button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("新增")])],1):e._e(),e._v(" "),a("Modal",{attrs:{width:"1160",title:e.rolemodaltitle,closable:!1,"mask-closable":!1},model:{value:e.addrole,callback:function(t){e.addrole=t},expression:"addrole"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:e.modalCancel}},[a("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),e._v(" "),a("div",{staticClass:"ivu-modal-header-inner"},[e._v(e._s(e.rolemodaltitle))])]),e._v(" "),a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("Tabs",{staticClass:"list",attrs:{type:"card",animated:!1,value:e.showtab}},e._l(e.purviews,function(t,l){return a("TabPane",{attrs:{label:l,name:l}},[a("ul",{staticClass:"rolemainul"},e._l(t,function(t,l){return a("li",{staticClass:"rolemain"},[a("div",{staticClass:"rolemainlist"},[a("div",{staticClass:"rolewidth"},[e._v(e._s(t.p_name))])]),e._v(" "),e._l(t.action,function(t,l){return a("div",{staticClass:"rolemainlist"},[0==t.p_type?a("div",{staticClass:"rolewidth"},[a("span",[e._v(e._s(t.p_name))]),e._v(" "),a("Select",{staticStyle:{width:"70px"},attrs:{size:"small","label-in-value":!0,transfer:!0},model:{value:e.purviewdata[t.p_id],callback:function(a){e.$set(e.purviewdata,t.p_id,a)},expression:"purviewdata[value.p_id]"}},e._l(e.dataauths,function(t,l){return a("Option",{key:l,attrs:{value:l}},[e._v(e._s(t)+"\n                                                ")])}),1)],1):1==t.p_type?a("div",{staticClass:"rolewidth"},[a("Checkbox",{model:{value:e.purviewdata[t.p_id],callback:function(a){e.$set(e.purviewdata,t.p_id,a)},expression:"purviewdata[value.p_id]"}},[e._v(e._s(t.p_name))])],1):a("div",{staticClass:"rolewidth"},[a("span",[e._v("--")])])])})],2)}),0)])}),1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Row",[a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"角色名称",prop:"role_name"}},[a("Input",{attrs:{size:"large",placeholder:"请输入角色名称"},model:{value:e.formValidate.role_name,callback:function(t){e.$set(e.formValidate,"role_name",t)},expression:"formValidate.role_name"}})],1)],1),e._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"角色类型",prop:"role_type"}},[a("Select",{staticStyle:{width:"205px !important","text-align":"left"},attrs:{placeholder:"请选择",transfer:!0},model:{value:e.formValidate.role_type,callback:function(t){e.$set(e.formValidate,"role_type",t)},expression:"formValidate.role_type"}},e._l(e.roletypes,function(t,l){return a("Option",{key:l,attrs:{value:l}},[e._v(e._s(t)+"\n                                    ")])}),1)],1)],1),e._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"备注信息",prop:"role_desp"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"简要输入备注信息"},model:{value:e.formValidate.role_desp,callback:function(t){e.$set(e.formValidate,"role_desp",t)},expression:"formValidate.role_desp"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:e.modalCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:e.modalOk}},[e._v("确定")])],1)],1)],1)],1)],1)],1),e._v(" "),a("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[a("Card",[a("Row",[a("Col",[a("Table",{attrs:{border:"",columns:e.roleTitle,data:e.roleList,stripe:!0}})],1)],1)],1)],1)],1)},r=[];l._withStripped=!0;var i={render:l,staticRenderFns:r};t.default=i}});