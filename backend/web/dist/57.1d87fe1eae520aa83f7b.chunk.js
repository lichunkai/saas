webpackJsonp([57],{291:function(t,a,e){"use strict";function i(t){r||e(775)}Object.defineProperty(a,"__esModule",{value:!0});var o=e(526),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(a,t,function(){return o[t]})}(s);var l=e(777),d=e.n(l),r=!1,u=e(0),c=i,h=u(n.a,d.a,!1,c,null,null);h.options.__file="src/views/common/putongpeizhi.vue",a.default=h.exports},526:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i="",o="";a.default={name:"putongpeizhi",data:function(){var t=this;return{guanjianzi:"",totalnum1:0,currentpage1:1,totalnum2:0,currentpage2:1,pageSize:10,addPutongModal:!1,addPutongChildModal:!1,xiugaiPutongChildModal:!1,addPutongChildModalformValidate:{count:"",name:""},addPutongChildModalruleValidate:{name:[{required:!0,message:"请输入配置名称",trigger:"blur"}]},xiugaiPutongChildformValidate:{count:"",name:""},xiugaiPutongChildruleValidate:{name:[{required:!0,message:"请输入配置名称",trigger:"blur"}]},formValidate:{jname:"",name:""},ruleValidate:{name:[{required:!0,message:"请输入配置名称",trigger:"blur"}],jname:[{required:!0,message:"请输入配置英文简称",trigger:"blur"}]},peizhiLeftTable:[{title:"#",key:"peizhi_id",align:"center"},{title:"配置内容",key:"content",align:"center"},{title:"操作",key:"action",align:"center",render:function(a,e){return a("div",[a("a",{props:{},domProps:{innerHTML:"新增明细"},on:{click:function(){t.addPutongChild(e)}}})])}}],peizhiLeftData:[],peizhiRightTable:[{title:" 名称",key:"mingcheng",align:"center"},{title:"操作",key:"action",align:"center",render:function(a,e){return a("div",[a("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.xiugaiPutongChild(e)}}},"编辑"),a("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.removeChild(e)}}},"删除")])}}],peizhiRightData:[]}},methods:{rowClick1:function(t,a){i=a,this.xiugaiPutongChildformValidate.count=t.base_name,this.getputongpeizhiChild()},rowClick2:function(t,a){o=a,this.xiugaiPutongChildformValidate.name=t.child_name},addPutong:function(){this.addPutongModal=!0,this.formValidate.name="",this.formValidate.jname=""},add1Ok:function(){var t=this;this.$refs.formValidate.validate(function(a){a&&t.$http.post(api_param.apiurl+"/settingbase/add",{base_id:"",base_shorthand:t.formValidate.jname,base_name:t.formValidate.name},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$refs.formValidate.resetFields(),this.addPutongModal=!1,this.$Message.success(t.data.message),this.getputongpeizhi()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})})},add1Cancel:function(){this.$refs.formValidate.resetFields(),this.addPutongModal=!1},changePage1:function(t){this.currentpage1=t,this.getputongpeizhi()},getputongpeizhi:function(){this.$http.get(api_param.apiurl+"/settingbase/getlist",{params:{page:this.currentpage1,pagesize:10,kw:this.guanjianzi},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){if(console.log(t),200==t.data.code){this.totalnum1=parseInt(t.body.data.totalnum),this.peizhiLeftData=t.body.data.list;for(var a=0;a<this.peizhiLeftData.length;a++)this.peizhiLeftData[a].content=this.peizhiLeftData[a].base_name,this.peizhiLeftData[a].peizhi_id=this.peizhiLeftData[a].base_id}else 401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){})},addPutongChild:function(t){console.log(t),this.addPutongChildModal=!0,this.addPutongChildModalformValidate.count=t.row.base_name,this.addPutongChildModalformValidate.name=""},add2Ok:function(){var t=this;this.$refs.addPutongChildModalformValidate.validate(function(a){a&&t.$http.post(api_param.apiurl+"/settingbase/addchild",{base_id:t.peizhiLeftData[i].base_id,child_name:t.addPutongChildModalformValidate.name},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$refs.addPutongChildModalformValidate.resetFields(),this.addPutongChildModal=!1,this.$Message.success(t.data.message),this.getputongpeizhiChild()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})})},add2Cancel:function(){this.$refs.addPutongChildModalformValidate.resetFields(),this.addPutongChildModal=!1},changePage2:function(t){this.currentpage2=t,this.getputongpeizhiChild()},getputongpeizhiChild:function(){this.$http.post(api_param.apiurl+"/settingbase/getchildlist",{base_id:this.peizhiLeftData[i].base_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){if(200==t.data.code){console.log(t),this.totalnum2=parseInt(t.body.data.length),this.peizhiRightData=t.body.data;for(var a=0;a<this.peizhiRightData.length;a++)this.peizhiRightData[a].mingcheng=this.peizhiRightData[a].child_name}else 401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){})},xiugaiPutongChild:function(t){this.xiugaiPutongChildModal=!0,this.xiugaiPutongChildformValidate.count=this.peizhiLeftData[i].base_name,this.xiugaiPutongChildformValidate.name=this.peizhiRightData[o].child_name},xiugaiOk:function(){var t=this;this.$refs.xiugaiPutongChildformValidate.validate(function(a){a&&t.$http.post(api_param.apiurl+"/settingbase/editchild",{base_id:t.peizhiLeftData[i].base_id,child_id:t.peizhiRightData[o].child_id,child_name:t.xiugaiPutongChildformValidate.name},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$refs.xiugaiPutongChildformValidate.resetFields(),this.xiugaiPutongChildModal=!1,this.$Message.success(t.data.message),this.getputongpeizhiChild()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})})},xiugaiCancel:function(){this.$refs.xiugaiPutongChildformValidate.resetFields(),this.xiugaiPutongChildModal=!1},removeChild:function(t){var a=this;console.log(t.row.dt_id),this.$Modal.confirm({title:"删除部门",content:"确定要删除吗",okText:"确定",cancelText:"取消",onOk:function(){a.$http.post(api_param.apiurl+"/settingbase/delchild",{base_id:a.peizhiLeftData[i].base_id,child_id:a.peizhiRightData[o].child_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$Message.success(t.data.message),this.getputongpeizhiChild()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("删除失败")})}})},doSearch:function(){this.currentpage1=1,this.getputongpeizhi(),this.peizhiRightData=""},clearSearch:function(){this.guanjianzi="",this.getputongpeizhi(),this.peizhiRightData=""}},created:function(){this.getputongpeizhi(),this.getputongpeizhiChild()},computed:{}}},775:function(t,a,e){var i=e(776);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(8)("2c303f3c",i,!1,{})},776:function(t,a,e){a=t.exports=e(7)(!1),a.push([t.i,"",""])},777:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Row",[e("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{lg:24,md:24}},[e("Card",[e("Row",{attrs:{gutter:5}},[e("Col",{attrs:{lg:3,md:3}},[e("Input",{attrs:{placeholder:"关键字"},model:{value:t.guanjianzi,callback:function(a){t.guanjianzi=a},expression:"guanjianzi"}})],1),t._v(" "),e("Col",{attrs:{lg:3,md:3}},[e("Button",{attrs:{type:"primary"},on:{click:t.doSearch}},[t._v("查询")]),t._v(" "),e("Button",{attrs:{type:"primary"},on:{click:t.clearSearch}},[t._v("清空")])],1),t._v(" "),e("Col",{attrs:{lg:2,md:2,offset:"16"}},[e("Row",{attrs:{type:"flex",justify:"end"}},[e("Col",[e("Modal",{attrs:{title:"添加配置内容","mask-closable":!1},model:{value:t.addPutongModal,callback:function(a){t.addPutongModal=a},expression:"addPutongModal"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.add1Cancel}},[e("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),e("div",{staticClass:"ivu-modal-header-inner"},[t._v("添加配置内容")])]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text",size:"large"},on:{click:t.add1Cancel}},[t._v("取消")]),t._v(" "),e("Button",{attrs:{type:"primary",size:"large"},on:{click:t.add1Ok}},[t._v("确定")])],1),t._v(" "),e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[e("FormItem",{attrs:{label:"配置名称",prop:"name"}},[e("Input",{attrs:{placeholder:""},model:{value:t.formValidate.name,callback:function(a){t.$set(t.formValidate,"name",a)},expression:"formValidate.name"}})],1),t._v(" "),e("FormItem",{attrs:{label:"配置英文简称",prop:"jname"}},[e("Input",{attrs:{placeholder:""},model:{value:t.formValidate.jname,callback:function(a){t.$set(t.formValidate,"jname",a)},expression:"formValidate.jname"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),e("Col",{attrs:{lg:24,md:24}},[e("Card",[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{lg:12,md:12}},[e("div",{staticClass:"peizhiLeft"},[e("Table",{attrs:{border:"",columns:t.peizhiLeftTable,data:t.peizhiLeftData,"highlight-row":""},on:{"on-row-click":t.rowClick1}}),t._v(" "),e("Modal",{attrs:{title:"修改明细","mask-closable":!1},model:{value:t.xiugaiPutongChildModal,callback:function(a){t.xiugaiPutongChildModal=a},expression:"xiugaiPutongChildModal"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.xiugaiCancel}},[e("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),e("div",{staticClass:"ivu-modal-header-inner"},[t._v("修改明细")])]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text",size:"large"},on:{click:t.xiugaiCancel}},[t._v("取消")]),t._v(" "),e("Button",{attrs:{type:"primary",size:"large"},on:{click:t.xiugaiOk}},[t._v("确定")])],1),t._v(" "),e("Form",{ref:"xiugaiPutongChildformValidate",attrs:{model:t.xiugaiPutongChildformValidate,rules:t.xiugaiPutongChildruleValidate,"label-width":90}},[e("FormItem",{attrs:{label:"配置内容",prop:"count"}},[e("Input",{attrs:{placeholder:"",disabled:""},model:{value:t.xiugaiPutongChildformValidate.count,callback:function(a){t.$set(t.xiugaiPutongChildformValidate,"count",a)},expression:"xiugaiPutongChildformValidate.count"}})],1),t._v(" "),e("FormItem",{attrs:{label:"名称",prop:"name"}},[e("Input",{attrs:{placeholder:""},model:{value:t.xiugaiPutongChildformValidate.name,callback:function(a){t.$set(t.xiugaiPutongChildformValidate,"name",a)},expression:"xiugaiPutongChildformValidate.name"}})],1)],1)],1)],1),t._v(" "),e("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[e("Col",[e("Page",{attrs:{total:t.totalnum1,current:t.currentpage1,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage1}})],1)],1)],1),t._v(" "),e("Col",{attrs:{lg:12,md:12}},[e("div",{staticClass:"peizhiRight"},[e("Table",{attrs:{border:"",columns:t.peizhiRightTable,data:t.peizhiRightData},on:{"on-row-click":t.rowClick2}}),t._v(" "),e("Modal",{attrs:{title:"新增明细","mask-closable":!1},model:{value:t.addPutongChildModal,callback:function(a){t.addPutongChildModal=a},expression:"addPutongChildModal"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.add2Cancel}},[e("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),e("div",{staticClass:"ivu-modal-header-inner"},[t._v("新增明细")])]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text",size:"large"},on:{click:t.add2Cancel}},[t._v("取消")]),t._v(" "),e("Button",{attrs:{type:"primary",size:"large"},on:{click:t.add2Ok}},[t._v("确定")])],1),t._v(" "),e("Form",{ref:"addPutongChildModalformValidate",attrs:{model:t.addPutongChildModalformValidate,rules:t.addPutongChildModalruleValidate,"label-width":90}},[e("FormItem",{attrs:{label:"配置内容",prop:"count"}},[e("Input",{attrs:{placeholder:"",disabled:""},model:{value:t.addPutongChildModalformValidate.count,callback:function(a){t.$set(t.addPutongChildModalformValidate,"count",a)},expression:"addPutongChildModalformValidate.count"}})],1),t._v(" "),e("FormItem",{attrs:{label:"名称",prop:"name"}},[e("Input",{attrs:{placeholder:""},model:{value:t.addPutongChildModalformValidate.name,callback:function(a){t.$set(t.addPutongChildModalformValidate,"name",a)},expression:"addPutongChildModalformValidate.name"}})],1)],1)],1)],1),t._v(" "),e("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[e("Col",[e("Page",{attrs:{total:t.totalnum2,current:t.currentpage2,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage2}})],1)],1)],1)],1)],1)],1)],1)},o=[];i._withStripped=!0;var n={render:i,staticRenderFns:o};a.default=n}});