webpackJsonp([56],{292:function(t,e,a){"use strict";function i(t){r||a(778)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(527),n=a.n(s);for(var l in s)"default"!==l&&function(t){a.d(e,t,function(){return s[t]})}(l);var o=a(780),d=a.n(o),r=!1,c=a(0),u=i,m=c(n.a,d.a,!1,u,null,null);m.options.__file="src/views/common/qujianpeizhi.vue",e.default=m.exports},527:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="",s="";e.default={name:"qujianpeizhi",data:function(){var t=this;return{guanjianzi:"",totalnum1:0,currentpage1:1,totalnum2:0,currentpage2:1,pageSize:10,addQujianModal:!1,addQujianformValidate:{name:"",jname:""},addQujianruleValidate:{name:[{required:!0,message:"请输入配置名称",trigger:"blur"}],jname:[{required:!0,message:"请输入配置英文简称",trigger:"blur"}]},orderEdit:!1,xiugaiModel:!1,setQujianformValidate:{addleast:"",addlimit:"",adddanwei:""},setQujianruleValidate:{addleast:[{required:!0,message:"请输入下限",trigger:"blur"}],adddanwei:[{required:!0,message:"请输入单位",trigger:"blur"}]},setChlidformValidate:{setleast:"",setlimit:"",setdanwei:""},setChlidruleValidate:{setleast:[{required:!0,message:"请输入下限",trigger:"blur"}],setdanwei:[{required:!0,message:"请输入单位",trigger:"blur"}]},sectionName:[{title:"#",key:"sectionId",align:"center"},{title:"区间名称",key:"sectionName",align:"center"},{title:"操作",key:"peizhiSection",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"text",size:"small"},style:{marginRight:"5px",color:"#2d8cf0"},on:{click:function(){t.setQujian(a)}}},"设置区间")])}}],sectionNameData:[],sectionDetail:[{title:"名称",key:"name",align:"center"},{title:"最小值",key:"min",align:"center"},{title:"最大值",key:"max",align:"center"},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.xiugaiqujianChild(a)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.removeChild(a)}}},"删除")])}}],sectionDetailData:[]}},created:function(){this.getqujianlist()},methods:{rowClick1:function(t,e){i=e,this.getchildlist()},rowClick2:function(t,e){s=e,console.log(t)},addQujian:function(){this.addQujianModal=!0},add1Ok:function(){var t=this;this.$refs.addQujianformValidate.validate(function(e){if(e){var a={qujian_id:"",qujian_shorthand:t.addQujianformValidate.jname,qujian_name:t.addQujianformValidate.name};t.$http.post(api_param.apiurl+"/settingqujian/add",a,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){console.log(t),200===t.data.code?(this.$refs.addQujianformValidate.resetFields(),this.$Message.success(t.data.message),this.getqujianlist(),this.addQujianModal=!1):401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})}})},add1Cancel:function(){this.$refs.addQujianformValidate.resetFields(),this.addQujianModal=!1},changePage1:function(t){this.currentpage1=t,this.getqujianlist()},getqujianlist:function(){this.$http.get(api_param.apiurl+"/settingqujian/getlist",{params:{page:this.currentpage1,pagesize:"10",kw:this.guanjianzi},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){if(200==t.data.code){this.totalnum1=parseInt(t.body.data.totalnum),this.sectionNameData=t.body.data.list;for(var e=0;e<this.sectionNameData.length;e++)this.sectionNameData[e].sectionName=this.sectionNameData[e].qujian_name,this.sectionNameData[e].sectionId=this.sectionNameData[e].qujian_id}else 401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){console.log(t)})},setQujian:function(t){this.orderEdit=!0},setCancel:function(){this.$refs.setQujianformValidate.resetFields(),this.orderEdit=!1},setOk:function(){var t=this,e="";this.$refs.setQujianformValidate.validate(function(a){if(a){e=""===t.setQujianformValidate.addlimit?t.setQujianformValidate.addleast+t.setQujianformValidate.adddanwei+"以上":t.setQujianformValidate.addleast+"-"+t.setQujianformValidate.addlimit+t.setQujianformValidate.adddanwei;var s={qujian_id:t.sectionNameData[i].qujian_id,child_name:e,min:t.setQujianformValidate.addleast,max:t.setQujianformValidate.addlimit};""!==t.setQujianformValidate.addlimit&&parseInt(t.setQujianformValidate.addleast)>=parseInt(t.setQujianformValidate.addlimit)?t.$Message.warning("下限不能大于或等于上限"):/^[\u4e00-\u9fa5]+$/gi.test(t.setQujianformValidate.adddanwei)?t.$http.post(api_param.apiurl+"/settingqujian/addchild",s,{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){console.log(t),200===t.data.code?(this.$refs.setQujianformValidate.resetFields(),this.$Message.success(t.data.message),this.orderEdit=!1,this.getchildlist()):401===t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){console.log(t),this.$Message.warning("更新失败")}):t.$Message.warning("单位框只能输入汉字")}})},changePage2:function(t){this.currentpage2=t,this.getchildlist()},getchildlist:function(){this.$http.post(api_param.apiurl+"/settingqujian/getchildlist",{qujian_id:this.sectionNameData[i].qujian_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){if(200==t.data.code)if(null!==t.body.data){this.totalnum2=parseInt(t.body.data.length),this.sectionDetailData=t.body.data,console.log(this.sectionDetailData.length);for(var e=0;e<this.sectionDetailData.length;e++)this.sectionDetailData[e].name=this.sectionDetailData[e].child_name,this.sectionDetailData[e].max=this.sectionDetailData[e].max,this.sectionDetailData[e].min=this.sectionDetailData[e].min}else this.sectionDetailData=[];else 401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){console.log(t),this.$Message.warning("更新失败")})},xiugaiqujianChild:function(t){this.xiugaiModel=!0,console.log(t),this.setChlidformValidate.setleast=t.row.min,this.setChlidformValidate.setlimit=t.row.max,"以上"!==t.row.child_name.match(/[\u4e00-\u9fa5]/g).join("").slice(-2)?this.setChlidformValidate.setdanwei=t.row.child_name.match(/[\u4e00-\u9fa5]/g).join(""):this.setChlidformValidate.setdanwei=t.row.child_name.match(/[\u4e00-\u9fa5]/g).join("").split("以")[0]},setChlidOk:function(){var t=this,e="";this.$refs.setChlidformValidate.validate(function(a){a&&(e=""===t.setChlidformValidate.setlimit?t.setChlidformValidate.setleast+t.setChlidformValidate.setdanwei+"以上":t.setChlidformValidate.setleast+"-"+t.setChlidformValidate.setlimit+t.setChlidformValidate.setdanwei,""!==t.setChlidformValidate.setlimit&&parseInt(t.setChlidformValidate.setleast)>=parseInt(t.setChlidformValidate.setlimit)?t.$Message.warning("下限不能大于或等于上限"):/^[\u4e00-\u9fa5]+$/gi.test(t.setChlidformValidate.setdanwei)?t.$http.post(api_param.apiurl+"/settingqujian/editchild",{qujian_id:t.sectionNameData[i].qujian_id,child_id:t.sectionDetailData[s].child_id,child_name:e,min:t.setChlidformValidate.setleast,max:t.setChlidformValidate.setlimit},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$refs.setChlidformValidate.resetFields(),this.xiugaiModel=!1,this.$Message.success(t.data.message),this.getchildlist()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")}):t.$Message.warning("单位框只能输入汉字"))})},setChlidCancel:function(){this.$refs.setChlidformValidate.resetFields(),this.xiugaiModel=!1},removeChild:function(t){var e=this;this.$Modal.confirm({title:"删除部门",content:"确定要删除吗",okText:"确定",cancelText:"取消",onOk:function(){e.$http.post(api_param.apiurl+"/settingqujian/delchild",{qujian_id:e.sectionNameData[i].qujian_id,child_id:e.sectionDetailData[s].child_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$Message.success(t.data.message),this.getchildlist()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("删除失败")})}})},doSearch:function(){this.currentpage1=1,this.getqujianlist(),this.sectionDetailData=""},clearSearch:function(){this.guanjianzi="",this.getqujianlist(),this.sectionDetailData=""}},computed:{}}},778:function(t,e,a){var i=a(779);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(8)("3afe26a1",i,!1,{})},779:function(t,e,a){e=t.exports=a(7)(!1),e.push([t.i,"\n.marTop10px {\n  margin-top: 10px;\n}\n.marBtn10px {\n  margin-bottom: 10px;\n}\n/*只用于占位*/\n.btnClear {\n  height: 32px;\n}\n.divP input {\n  width: 28px;\n  text-indent: 2px;\n}\n.divP {\n  width: 100%;\n  margin: 2px 0;\n  overflow: hidden;\n}\n.taps {\n  margin: 10px 0;\n  color: #666;\n  overflow: hidden;\n}\n.keyuancounter .ivu-table-cell {\n  padding-left: 0px !important;\n  padding-right: 0px !important;\n}\n.textCenter {\n  text-align: center;\n  margin: 10px 0;\n}\n",""])},780:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",[a("Col",{attrs:{lg:24,md:24}},[a("Card",[a("Row",{attrs:{gutter:5}},[a("Col",{attrs:{lg:3,md:3}},[a("Input",{attrs:{placeholder:"关键字"},model:{value:t.guanjianzi,callback:function(e){t.guanjianzi=e},expression:"guanjianzi"}})],1),t._v(" "),a("Col",{attrs:{lg:3,md:3}},[a("Button",{attrs:{type:"primary"},on:{click:t.doSearch}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.clearSearch}},[t._v("清空")])],1),t._v(" "),a("Col",{attrs:{lg:2,md:2,offset:"16"}},[a("Row",{attrs:{type:"flex",justify:"end"}},[a("Col",[a("Modal",{attrs:{title:"新增区间配置","mask-closable":!1},model:{value:t.addQujianModal,callback:function(e){t.addQujianModal=e},expression:"addQujianModal"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.add1Cancel}},[a("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),a("div",{staticClass:"ivu-modal-header-inner"},[t._v("新增区间配置")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.add1Cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.add1Ok}},[t._v("确定")])],1),t._v(" "),a("Form",{ref:"addQujianformValidate",attrs:{model:t.addQujianformValidate,rules:t.addQujianruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"区间名称",prop:"name"}},[a("Input",{attrs:{placeholder:""},model:{value:t.addQujianformValidate.name,callback:function(e){t.$set(t.addQujianformValidate,"name",e)},expression:"addQujianformValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"区间英文简称",prop:"jname"}},[a("Input",{attrs:{placeholder:""},model:{value:t.addQujianformValidate.jname,callback:function(e){t.$set(t.addQujianformValidate,"jname",e)},expression:"addQujianformValidate.jname"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[a("Card",[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{lg:8,md:8}},[a("Table",{attrs:{columns:t.sectionName,data:t.sectionNameData,border:"",stripe:"","highlight-row":""},on:{"on-row-click":t.rowClick1}}),t._v(" "),a("Modal",{attrs:{title:"设置区间",stley:"width:960px;","mask-closable":!1},model:{value:t.orderEdit,callback:function(e){t.orderEdit=e},expression:"orderEdit"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.setCancel}},[a("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),a("div",{staticClass:"ivu-modal-header-inner"},[t._v("设置区间")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.setCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.setOk}},[t._v("确定")])],1),t._v(" "),a("Form",{ref:"setQujianformValidate",attrs:{model:t.setQujianformValidate,rules:t.setQujianruleValidate}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{lg:24,md:24}},[t._v("\n                        由低到高的顺序填写，后一项不填写默认以上")]),t._v(" "),a("Col",{staticClass:"textCenter",attrs:{lg:8,md:8}},[a("strong",[t._v("下限(>)")])]),t._v(" "),a("Col",{staticClass:"textCenter",attrs:{lg:8,md:8}},[a("strong",[t._v("上限(< =)")])]),t._v(" "),a("Col",{staticClass:"textCenter",attrs:{lg:8,md:8}},[a("div",{staticStyle:{visibility:"hidden"}},[t._v("单位")])]),t._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"",prop:"addleast"}},[a("Input",{attrs:{placeholder:""},model:{value:t.setQujianformValidate.addleast,callback:function(e){t.$set(t.setQujianformValidate,"addleast",e)},expression:"setQujianformValidate.addleast"}})],1)],1),t._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"",prop:"addlimit"}},[a("Input",{attrs:{placeholder:""},model:{value:t.setQujianformValidate.addlimit,callback:function(e){t.$set(t.setQujianformValidate,"addlimit",e)},expression:"setQujianformValidate.addlimit"}})],1)],1),t._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{staticStyle:{float:"left"},attrs:{label:"",prop:"adddanwei"}},[a("Input",{attrs:{placeholder:""},model:{value:t.setQujianformValidate.adddanwei,callback:function(e){t.$set(t.setQujianformValidate,"adddanwei",e)},expression:"setQujianformValidate.adddanwei"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("单位")])])],1)],1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[a("Col",[a("Page",{attrs:{total:t.totalnum1,current:t.currentpage1,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage1}})],1)],1)],1),t._v(" "),a("Col",{attrs:{lg:16,md:16}},[a("Table",{attrs:{columns:t.sectionDetail,data:t.sectionDetailData,border:"",stripe:""},on:{"on-row-click":t.rowClick2}}),t._v(" "),a("Modal",{attrs:{title:"修改区间","mask-closable":!1},model:{value:t.xiugaiModel,callback:function(e){t.xiugaiModel=e},expression:"xiugaiModel"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.setChlidCancel}},[a("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),a("div",{staticClass:"ivu-modal-header-inner"},[t._v("修改区间")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.setChlidCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.setChlidOk}},[t._v("确定")])],1),t._v(" "),a("Form",{ref:"setChlidformValidate",attrs:{model:t.setChlidformValidate,rules:t.setChlidruleValidate}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{lg:24,md:24}},[t._v("\n                        上限不填写默认以上")]),t._v(" "),a("Col",{staticClass:"textCenter",attrs:{lg:8,md:8}},[a("strong",[t._v("下限(>)")])]),t._v(" "),a("Col",{staticClass:"textCenter",attrs:{lg:8,md:8}},[a("strong",[t._v("上限(< =)")])]),t._v(" "),a("Col",{staticClass:"textCenter",attrs:{lg:8,md:8}},[a("div",{staticStyle:{visibility:"hidden"}},[t._v("单位")])]),t._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"",prop:"setleast"}},[a("Input",{attrs:{placeholder:""},model:{value:t.setChlidformValidate.setleast,callback:function(e){t.$set(t.setChlidformValidate,"setleast",e)},expression:"setChlidformValidate.setleast"}})],1)],1),t._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{attrs:{label:"",prop:"setlimit"}},[a("Input",{attrs:{placeholder:""},model:{value:t.setChlidformValidate.setlimit,callback:function(e){t.$set(t.setChlidformValidate,"setlimit",e)},expression:"setChlidformValidate.setlimit"}})],1)],1),t._v(" "),a("Col",{attrs:{lg:8,md:8}},[a("FormItem",{staticStyle:{float:"left"},attrs:{label:"",prop:"setdanwei"}},[a("Input",{attrs:{placeholder:""},model:{value:t.setChlidformValidate.setdanwei,callback:function(e){t.$set(t.setChlidformValidate,"setdanwei",e)},expression:"setChlidformValidate.setdanwei"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("单位")])])],1)],1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[a("Col",[a("Page",{attrs:{total:t.totalnum2,current:t.currentpage2,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage2}})],1)],1)],1)],1)],1)],1)],1)},s=[];i._withStripped=!0;var n={render:i,staticRenderFns:s};e.default=n}});