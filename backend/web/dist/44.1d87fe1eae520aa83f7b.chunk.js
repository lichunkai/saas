webpackJsonp([44],{241:function(e,t,n){"use strict";function s(e){d||n(573)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(463),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var r=n(575),c=n.n(r),d=!1,l=n(0),p=s,u=l(i.a,c.a,!1,p,null,null);u.options.__file="src/views/message/message.vue",t.default=u.exports},463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"message_index",data:function(){var e=this,t=function(t,n){return t("Button",{props:{size:"small"},on:{click:function(){e.$http.post(api_param.apiurl+"/notify/read",{Notify_id:n.row.n_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?this.getIndex():401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("网络异常")})}}},"标为已读")},n=function(t,n){return t("Button",{props:{size:"small",type:"error"},on:{click:function(){e.$http.post(api_param.apiurl+"/notify/del",{Notify_id:n.row.n_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?this.getIndex():401==e.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){this.$Message.warning("网络异常")})}}},"删除")};return{currentMesList:[],unreadMesList:[],hasreadMesList:[],recyclebinList:[],currentMessageType:"",showMesTitleList:!0,unreadCount:0,hasreadCount:0,recyclebinCount:0,noDataText:"暂无未读消息",mes:{title:"",time:"",content:""},mesTitleColumns:[{title:"　标题",key:"title",align:"left",ellipsis:!0,render:function(t,n){return t("a",{on:{click:function(){e.showMesTitleList=!1,e.mes.title=n.row.n_title,e.mes.time=n.row.n_time,e.mes.content=n.row.n_content}}},n.row.n_title)}},{title:"通知时间",key:"n_time",align:"center",width:180,render:function(e,t){return e("span",[e("Icon",{props:{type:"android-time",size:12},style:{margin:"0 5px"}}),e("span",{props:{type:"android-time",size:12}},t.row.n_time)])}},{title:"操作",key:"asread",align:"center",width:100,render:function(s,a){return"unread"===e.currentMessageType?s("div",[t(s,a)]):"hasread"===e.currentMessageType?s("div",[n(s,a)]):void 0}}]}},created:function(){this.defaultMessageList()},methods:{backMesTitleList:function(){this.showMesTitleList=!0},defaultMessageList:function(){this.$http.get(api_param.apiurl+"notify/getindex",{params:{},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.hasreadMesList=e.data.data.hasreadMesList,this.unreadMesList=e.data.data.unreadMesList,this.unreadCount=this.unreadMesList.length,this.hasreadCount=this.hasreadMesList.length,this.showMesTitleList=!0,this.currentMessageType="unread",this.noDataText="暂无未读消息",this.currentMesList=this.unreadMesList):401==e.data.code?(this.$store.commit("logout",this),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){console.log(e)})},setCurrentMesType:function(e){this.currentMessageType!==e&&(this.showMesTitleList=!0),this.currentMessageType=e;"unread"===e?(this.noDataText="暂无未读消息",this.currentMesList=this.unreadMesList):"hasread"===e&&(this.noDataText="暂无已读消息",this.currentMesList=this.hasreadMesList)},getIndex:function(){this.$http.get(api_param.apiurl+"notify/getindex",{params:{},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(e){200==e.data.code?(this.hasreadMesList=e.data.data.hasreadMesList,this.unreadMesList=e.data.data.unreadMesList,this.unreadCount=this.unreadMesList.length,this.hasreadCount=this.hasreadMesList.length,this.setCurrentMesType(this.currentMessageType)):401==e.data.code?(this.$store.commit("logout",this),this.$router.push({name:"login"})):this.$Message.warning(e.data.message)},function(e){console.log(e)})}},mounted:function(){this.getIndex()},watch:{}}},573:function(e,t,n){var s=n(574);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n(8)("54e484a8",s,!1,{})},574:function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,"\n.message-main-con {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  background-color: white;\n  margin: 10px;\n  box-shadow: 2px 2px 10px 2px rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.message-mainlist-con {\n  position: absolute;\n  left: 0;\n  top: 10px;\n  width: 280px;\n  bottom: 0;\n  padding: 10px 0;\n  background-color: #ffffff;\n  margin: 0 10px;\n  border-radius: 3px;\n  -webkit-border-radius: 3px;\n  -moz-border-radius: 3px;\n  height: 200px;\n  box-shadow: 2px 2px 10px 2px rgba(0, 0, 0, 0.1);\n}\n.message-mainlist-con div {\n  padding: 10px;\n  margin: 0 20px;\n  border-bottom: 1px dashed #d2d3d2;\n}\n.message-mainlist-con div:last-child {\n  border: none;\n}\n.message-mainlist-con div .message-count-badge-outer {\n  float: right;\n}\n.message-mainlist-con div .message-count-badge {\n  background: #d2d3d2;\n}\n.message-mainlist-con div:first-child .message-count-badge {\n  background: #ed3f14;\n}\n.message-mainlist-con div .mes-type-btn-text {\n  margin-left: 10px;\n}\n.message-content-con {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  bottom: 10px;\n  left: 300px;\n  overflow: auto;\n}\n.message-content-con .message-title-list-con {\n  width: 100%;\n  height: 100%;\n}\n.message-content-con .message-content-top-bar {\n  height: 40px;\n  width: 100%;\n  background: white;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border-bottom: 1px solid #dededb;\n}\n.message-content-con .message-content-top-bar .mes-back-btn-con {\n  position: absolute;\n  width: 70px;\n  height: 30px;\n  left: 0;\n  top: 5px;\n}\n.message-content-con .message-content-top-bar .mes-title {\n  position: absolute;\n  top: 0;\n  right: 70px;\n  bottom: 0;\n  left: 70px;\n  line-height: 40px;\n  padding: 0 30px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n}\n.message-content-con .mes-time-con {\n  position: absolute;\n  width: 100%;\n  top: 40px;\n  left: 0;\n  padding: 20px 0;\n  text-align: center;\n  font-size: 14px;\n  color: #b7b7b5;\n}\n.message-content-con .message-content-body {\n  position: absolute;\n  top: 90px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n}\n.message-content-con .message-content-body .message-content {\n  padding: 10px 20px;\n}\n.back-message-list-enter,\n.back-message-list-leave-to {\n  opacity: 0;\n}\n.back-message-list-enter-active,\n.back-message-list-leave-active {\n  transition: all .5s;\n}\n.back-message-list-enter-to,\n.back-message-list-leave {\n  opacity: 1;\n}\n.view-message-enter,\n.view-message-leave-to {\n  opacity: 0;\n}\n.view-message-enter-active,\n.view-message-leave-active {\n  transition: all .5s;\n}\n.view-message-enter-to,\n.view-message-leave {\n  opacity: 1;\n}\n.mes-current-type-btn-enter,\n.mes-current-type-btn-leave-to {\n  opacity: 0;\n  width: 0;\n}\n.mes-current-type-btn-enter-active,\n.mes-current-type-btn-leave-active {\n  transition: all .3s;\n}\n.mes-current-type-btn-enter-to,\n.mes-current-type-btn-leave {\n  opacity: 1;\n  width: 12px;\n}\n.single-page-con .ivu-table-cell a {\n  padding-left: 10px;\n}\n",""])},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-main-con"},[n("div",{staticClass:"message-mainlist-con"},[n("div",[n("Button",{attrs:{size:"large",long:"",type:"text"},on:{click:function(t){return e.setCurrentMesType("unread")}}},[n("transition",{attrs:{name:"mes-current-type-btn"}},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:"unread"===e.currentMessageType,expression:"currentMessageType === 'unread'"}],attrs:{type:"checkmark"}})],1),e._v(" "),n("span",{staticClass:"mes-type-btn-text"},[e._v("未读消息")]),e._v(" "),n("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge",count:e.unreadCount}})],1)],1),e._v(" "),n("div",[n("Button",{attrs:{size:"large",long:"",type:"text"},on:{click:function(t){return e.setCurrentMesType("hasread")}}},[n("transition",{attrs:{name:"mes-current-type-btn"}},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:"hasread"===e.currentMessageType,expression:"currentMessageType === 'hasread'"}],attrs:{type:"checkmark"}})],1),e._v(" "),n("span",{staticClass:"mes-type-btn-text"},[e._v("已读消息")]),e._v(" "),n("Badge",{staticClass:"message-count-badge-outer",attrs:{"class-name":"message-count-badge",count:e.hasreadCount}})],1)],1)]),e._v(" "),n("div",{staticClass:"message-content-con"},[n("Card",[n("transition",{attrs:{name:"view-message"}},[e.showMesTitleList?n("div",{staticClass:"message-title-list-con"},[n("Table",{ref:"messageList",attrs:{columns:e.mesTitleColumns,data:e.currentMesList,"no-data-text":e.noDataText}})],1):e._e()])],1),e._v(" "),n("transition",{attrs:{name:"back-message-list"}},[e.showMesTitleList?e._e():n("div",{staticClass:"message-view-content-con"},[n("div",{staticClass:"message-content-top-bar"},[n("span",{staticClass:"mes-back-btn-con"},[n("Button",{attrs:{type:"text"},on:{click:e.backMesTitleList}},[n("Icon",{attrs:{type:"chevron-left"}}),e._v("  返回")],1)],1),e._v(" "),n("h3",{staticClass:"mes-title"},[e._v(e._s(e.mes.title))])]),e._v(" "),n("p",{staticClass:"mes-time-con"},[n("Icon",{attrs:{type:"android-time"}}),e._v("  "+e._s(e.mes.time)+"\n                ")],1),e._v(" "),n("div",{staticClass:"message-content-body"},[n("p",{staticClass:"message-content"},[e._v(e._s(e.mes.content))])])])])],1)])},a=[];s._withStripped=!0;var i={render:s,staticRenderFns:a};t.default=i}});