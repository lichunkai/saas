webpackJsonp([38],{275:function(t,a,i){"use strict";function e(t){u||i(725)}Object.defineProperty(a,"__esModule",{value:!0});var s=i(510),n=i.n(s);for(var r in s)"default"!==r&&function(t){i.d(a,t,function(){return s[t]})}(r);var o=i(727),d=i.n(o),u=!1,c=i(0),l=e,m=c(n.a,d.a,!1,l,null,null);m.options.__file="src/views/resource/pianqu.vue",a.default=m.exports},510:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i(86),s=(function(t){t&&t.__esModule}(e),""),n="";a.default={name:"pianqu_index",data:function(){var t=this;return{addDistrict:{quyu:"",name:"",address:""},ruleValidate:{name:[{required:!0,message:"请输入片区名称",trigger:"blur"}],address:[{required:!0,message:"请输入片区地址",trigger:"blur"}]},xiugaiDistrict:{quyu:"",name:"",address:""},xiugaiDistrictRules:{name:[{required:!0,message:"请输入片区名称",trigger:"blur"}],address:[{required:!0,message:"请输入片区地址",trigger:"blur"}]},addAdministrative:{res1:[],dt_province_id:"",dt_province_name:"",dt_city_id:"",dt_city_name:"",dt_area_id:"",dt_area_name:""},addAdministrativeRules:{},xiugaiAdministrative:{res2:[]},xiugaiAdministrativeRules:{},xiugaixingzheng:!1,addxingzheng:!1,addPianqu:!1,xiugaiPianqu:!1,columns1:[{title:"行政区",key:"ar_name",align:"center"},{title:"操作",key:"schoolName",align:"center",render:function(a,i){return a("div",[a("a",{props:{type:"primary",size:"small"},on:{click:function(){t.addpianqu()}}},"新增片区")])}}],columns1Data:[],totalnum1:0,currentpage1:1,pageSize:10,columns2:[{title:"片区",key:"pianqu",align:"center"},{title:"地址",key:"address",align:"center"},{title:"操作",key:"schoolName",align:"center",render:function(a,i){return 1==i.row.dts_status?a("div",[a("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.xiugaiPianqu=!0,t.xiugaiDistrict.quyu=t.columns1Data[s].ar_name,t.xiugaiDistrict.name=i.row.pianqu,t.xiugaiDistrict.address=i.row.address}}},"修改"),a("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.remove2(i)}}},"删除")]):a("div",{style:{color:"#ddd"}},"系统参数无法修改或者删除")}}],columns2Data:[],totalnum2:0,currentpage2:1}},created:function(){this.getOrganizational(),this.getpianqu()},methods:{getOrganizational:function(){this.$http.get(api_param.apiurl+"district/areaindex",{params:{page:this.currentpage1},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.totalnum1=parseInt(t.body.data.count),this.columns1Data=t.body.data.list):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){console.log(t)})},changePage1:function(t){this.currentpage1=t,this.getOrganizational()},getpianqu:function(){this.$http.get(api_param.apiurl+"/district/dtsindex",{params:{page:this.currentpage2,ar_id:this.columns1Data[s].ar_id},headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){if(200==t.data.code){this.totalnum2=parseInt(t.body.data.count),this.columns2Data=t.body.data.list;for(var a=0;a<this.columns2Data.length;a++)this.columns2Data[a].pianqu=this.columns2Data[a].dts_name,this.columns2Data[a].address=this.columns2Data[a].area_name+this.columns2Data[a].dts_address}else 401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})},changePage2:function(t){this.currentpage2=t,this.getpianqu()},addpianqu:function(t){this.addPianqu=!0,this.addDistrict.quyu="",this.addDistrict.name="",this.addDistrict.address=""},modalOk_pianqu:function(){var t=this;this.$refs.addDistrict.validate(function(a){a&&t.$http.post(api_param.apiurl+"/district/add",{area_id:t.columns1Data[s].ar_id,area_name:t.columns1Data[s].ar_name,dts_name:t.addDistrict.name,dts_address:t.addDistrict.address},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$refs.addDistrict.resetFields(),this.addPianqu=!1,this.$Message.success(t.data.message),this.getpianqu()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})})},modalCancel_pianqu:function(){this.addPianqu=!1,this.$refs.addDistrict.resetFields()},remove2:function(t){var a=this;this.$Modal.confirm({title:"删除片区",content:"确定要删除吗",okText:"确定",cancelText:"取消",onOk:function(){a.$http.post(api_param.apiurl+"/district/del",{dts_id:t.row.dts_id},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$Message.success(t.data.message),this.getpianqu()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("删除失败")})}})},xiugaiOk_pianqu:function(){var t=this;this.$refs.xiugaiDistrict.validate(function(a){a&&t.$http.post(api_param.apiurl+"district/edit",{dts_id:t.columns2Data[n].dts_id,dts_name:t.xiugaiDistrict.name,dts_address:t.xiugaiDistrict.address},{emulateJSON:!0,headers:{"X-Access-Token":api_param.XAccessToken}}).then(function(t){200==t.data.code?(this.$refs.xiugaiDistrict.resetFields(),this.xiugaiPianqu=!1,this.$Message.success(t.data.message),this.getpianqu()):401==t.data.code?(this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})):this.$Message.warning(t.data.message)},function(t){this.$Message.warning("更新失败")})})},xiugaiCancel_pianqu:function(){this.xiugaiPianqu=!1,this.$refs.xiugaiDistrict.resetFields()},rowClick1:function(t,a){s=a,this.addDistrict.quyu=this.columns1Data[a].ar_name,this.getpianqu()},rowClick2:function(t,a){n=a}}}},725:function(t,a,i){var e=i(726);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(8)("b64f41f8",e,!1,{})},726:function(t,a,i){a=t.exports=i(7)(!1),a.push([t.i,"\n.marTop10px {\n  margin-top: 10px;\n}\n.marBtn10px {\n  margin-bottom: 10px;\n}\n/*只用于占位*/\n.btnClear {\n  height: 32px;\n}\n.divP input {\n  width: 28px;\n  text-indent: 2px;\n}\n.divP {\n  width: 100%;\n  margin: 2px 0;\n  overflow: hidden;\n}\n.taps {\n  margin: 10px 0;\n  color: #666;\n  overflow: hidden;\n}\n.keyuancounter .ivu-table-cell {\n  padding-left: 0px !important;\n  padding-right: 0px !important;\n}\n.textCenter {\n  text-align: center;\n  margin: 10px 0;\n}\n",""])},727:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("Row",[i("Col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24,md:24}},[i("Card",[i("Row",{attrs:{gutter:20}},[i("Col",{attrs:{lg:10,md:10}},[i("Table",{attrs:{columns:t.columns1,data:t.columns1Data,border:"",stripe:"","highlight-row":""},on:{"on-row-click":t.rowClick1}}),t._v(" "),i("Modal",{attrs:{title:"新增片区","mask-closable":!1},model:{value:t.addPianqu,callback:function(a){t.addPianqu=a},expression:"addPianqu"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.modalCancel_pianqu}},[i("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),i("div",{staticClass:"ivu-modal-header-inner"},[t._v("新增片区")])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text",size:"large"},on:{click:t.modalCancel_pianqu}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary",size:"large"},on:{click:t.modalOk_pianqu}},[t._v("确定")])],1),t._v(" "),i("Form",{ref:"addDistrict",attrs:{model:t.addDistrict,rules:t.ruleValidate,"label-width":80}},[i("FormItem",{attrs:{label:"所属区域"}},[i("Input",{attrs:{type:"text",readonly:""},model:{value:t.addDistrict.quyu,callback:function(a){t.$set(t.addDistrict,"quyu",a)},expression:"addDistrict.quyu"}})],1),t._v(" "),i("FormItem",{attrs:{label:"片区名称",prop:"name"}},[i("Input",{attrs:{type:"text"},model:{value:t.addDistrict.name,callback:function(a){t.$set(t.addDistrict,"name",a)},expression:"addDistrict.name"}})],1),t._v(" "),i("FormItem",{attrs:{label:"片区地址",prop:"address"}},[i("Input",{attrs:{type:"text"},model:{value:t.addDistrict.address,callback:function(a){t.$set(t.addDistrict,"address",a)},expression:"addDistrict.address"}})],1)],1)],1),t._v(" "),i("Modal",{attrs:{title:"修改片区","mask-closable":!1},model:{value:t.xiugaiPianqu,callback:function(a){t.xiugaiPianqu=a},expression:"xiugaiPianqu"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("a",{staticClass:"ivu-modal-close",staticStyle:{display:"block!important"},on:{click:t.xiugaiCancel_pianqu}},[i("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]),t._v(" "),i("div",{staticClass:"ivu-modal-header-inner"},[t._v("修改片区")])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text",size:"large"},on:{click:t.xiugaiCancel_pianqu}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary",size:"large"},on:{click:t.xiugaiOk_pianqu}},[t._v("确定")])],1),t._v(" "),i("Form",{ref:"xiugaiDistrict",attrs:{model:t.xiugaiDistrict,rules:t.xiugaiDistrictRules,"label-width":80}},[i("FormItem",{attrs:{label:"所属区域"}},[i("Input",{attrs:{type:"text",readonly:""},model:{value:t.xiugaiDistrict.quyu,callback:function(a){t.$set(t.xiugaiDistrict,"quyu",a)},expression:"xiugaiDistrict.quyu"}})],1),t._v(" "),i("FormItem",{attrs:{label:"片区名称",prop:"name"}},[i("Input",{attrs:{type:"text"},model:{value:t.xiugaiDistrict.name,callback:function(a){t.$set(t.xiugaiDistrict,"name",a)},expression:"xiugaiDistrict.name"}})],1),t._v(" "),i("FormItem",{attrs:{label:"片区地址",prop:"address"}},[i("Input",{attrs:{type:"text"},model:{value:t.xiugaiDistrict.address,callback:function(a){t.$set(t.xiugaiDistrict,"address",a)},expression:"xiugaiDistrict.address"}})],1)],1)],1),t._v(" "),i("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[i("Col",[i("Page",{attrs:{total:t.totalnum1,current:t.currentpage1,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage1}})],1)],1)],1),t._v(" "),i("Col",{attrs:{lg:14,md:14}},[i("Table",{attrs:{columns:t.columns2,data:t.columns2Data,border:"",stripe:""},on:{"on-row-click":t.rowClick2}}),t._v(" "),i("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[i("Col",[i("Page",{attrs:{total:t.totalnum2,current:t.currentpage2,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage2}})],1)],1)],1)],1)],1)],1)],1)},s=[];e._withStripped=!0;var n={render:e,staticRenderFns:s};a.default=n}});